(this["webpackJsonpmy-react"]=this["webpackJsonpmy-react"]||[]).push([[0],{317:function(e,t,n){},425:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(14),r=n.n(i),o=(n(317),n(8)),l=n(494),s=n(20),d=n(24),u=n(456),j=n(501),b=Object(u.a)((function(e){return Object(j.a)({"@global":{"*":{boxSizing:"border-box",margin:0,padding:0},html:{"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",height:"100%",width:"100%"},body:{backgroundColor:"#f4f6f8",height:"100%",width:"100%"},a:{textDecoration:"none"},"#root":{height:"100%",width:"100%"},".dialogForm":{width:400,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})})),h=function(){return b(),null},x=n(300),m=n(9),O=Object(x.a)({palette:{background:{dark:"#F4F6F8",default:m.a.common.white,paper:m.a.common.white},primary:{main:m.a.indigo[500]},secondary:{main:m.a.common.white},text:{primary:m.a.blueGrey[900],secondary:m.a.blueGrey[600]}},shadows:["none","0 0 0 1px rgba(63,63,68,0.05), 0 1px 2px 0 rgba(63,63,68,0.15)","0 0 1px 0 rgba(0,0,0,0.31), 0 2px 2px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 3px 4px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 3px 4px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 6px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 6px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 8px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 5px 8px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 6px 12px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 7px 12px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 6px 16px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 7px 16px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 8px 18px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 9px 18px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 10px 20px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 11px 20px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 12px 22px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 13px 22px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 14px 24px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 16px 28px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 18px 30px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 20px 32px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 22px 34px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 24px 36px -8px rgba(0,0,0,0.25)"],typography:{h1:{fontWeight:500,fontSize:35,letterSpacing:"-0.24px"},h2:{fontWeight:500,fontSize:29,letterSpacing:"-0.24px"},h3:{fontWeight:500,fontSize:24,letterSpacing:"-0.06px"},h4:{fontWeight:500,fontSize:20,letterSpacing:"-0.06px"},h5:{fontWeight:500,fontSize:16,letterSpacing:"-0.05px"},h6:{fontWeight:500,fontSize:14,letterSpacing:"-0.05px"},overline:{fontWeight:500}}}),p=n(4),f=n(5),v=n(458),g=n(459),y=n(304),C=n(1),k=Object(u.a)({root:{},toolbar:{height:64}}),S=function(e){var t=e.className,n=Object(p.a)(e,["className"]),a=k();return Object(C.jsx)(v.a,Object(o.a)(Object(o.a)({className:Object(f.a)(a.root,t),elevation:0},n),{},{children:Object(C.jsx)(g.a,{className:a.toolbar,children:Object(C.jsx)(s.b,{to:"/",children:Object(C.jsx)(y.a,{color:"secondary",variant:"h4",children:"\u590d\u65e6\u5927\u5b66\u7cfb\u7edf\u8f6f\u4ef6\u4e0e\u5b89\u5168\u5b9e\u9a8c\u5ba4"})})})}))},I=n(37),w=n.n(I);function N(e){return e.auth&&null!=w.a.load("loggedIn")==0?(console.log("\u8bf7\u5148\u767b\u5f55"),Object(C.jsx)(d.a,{to:"/main/login"})):Object(C.jsx)(d.b,{path:e.path,render:function(t){return Object(C.jsx)(e.component,Object(o.a)(Object(o.a)({},t),{},{routes:e.routes}))}})}var W=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.default,display:"flex",height:"100%",overflow:"hidden",width:"100%"},wrapper:{display:"flex",flex:"1 1 auto",overflow:"hidden",paddingTop:64},contentContainer:{display:"flex",flex:"1 1 auto",overflow:"hidden"},content:{flex:"1 1 auto",height:"100%",overflow:"auto"}}})),B=function(e){var t=e.routes,n=W();return Object(C.jsxs)("div",{className:n.root,children:[Object(C.jsx)(S,{}),Object(C.jsx)("div",{className:n.wrapper,children:Object(C.jsx)("div",{className:n.contentContainer,children:Object(C.jsx)("div",{className:n.content,children:Object(C.jsx)(d.d,{children:t.map((function(e,t){return Object(C.jsx)(N,Object(o.a)({},e),t)}))})})})})]})},z=n(6),P=n(11),E=n(495),T=n(462),D=n(427),F=n(467),M=n(499),L=n(472),H=n(463),R=n(464),q=n(465),U=n(466),V=n(468),_=n(469),A=n(470),G=n(283),Y=n.n(G),J=n(115),K=n.n(J),$={0:"\u666e\u901a\u7528\u6237",10:"\u7cfb\u7edf\u7ba1\u7406\u5458",20:"\u8ba8\u8bba\u73ed\u7ba1\u7406\u5458",30:"Lab\u7ba1\u7406\u5458",40:"\u63a8\u8350\u8bba\u6587\u7ba1\u7406\u5458",50:"\u57f9\u517b\u65b9\u6848\u7ba1\u7406\u5458",60:"\u901a\u77e5\u7ba1\u7406\u5458"},Q="http://39.106.33.127",X=Q+"/article/category/list",Z=Q+"/article/category/add",ee=Q+"/article/category/delete",te=Q+"/article/",ne=Q+"/article/add",ae=Q+"/article/delete",ce=Q+"/mng/study/plan/paging",ie=Q+"/mng/bulletin/add",re=c.a.createContext(null),oe=n(426),le=n(460),se=n(461),de=Object(u.a)((function(e){return{item:{display:"flex",paddingTop:0,paddingBottom:0},button:{color:e.palette.text.secondary,fontWeight:e.typography.fontWeightMedium,justifyContent:"flex-start",letterSpacing:0,padding:"10px 8px",textTransform:"none",width:"100%"},icon:{marginRight:e.spacing(1)},title:{marginRight:"auto"},active:{color:e.palette.primary.main,"& $title":{fontWeight:e.typography.fontWeightMedium},"& $icon":{color:e.palette.primary.main}}}})),ue=function(e){var t=e.className,n=e.href,a=e.icon,c=e.title,i=e.isToOutLink,r=e.endIcon,l=e.nestedItem,d=e.onClick,u=Object(p.a)(e,["className","href","icon","title","isToOutLink","endIcon","nestedItem","onClick"]),j=de();return Object(C.jsx)(oe.a,Object(o.a)(Object(o.a)({className:Object(f.a)(j.item,t),disableGutters:!0},u),{},{children:l?Object(C.jsxs)(le.a,{activeClassName:j.active,className:j.button,onClick:function(){return d&&d()},children:[a&&Object(C.jsx)(a,{className:j.icon,size:"20"}),Object(C.jsx)("span",{className:j.title,children:c}),r]}):i?Object(C.jsxs)(le.a,{activeclassname:j.active,className:j.button,component:se.a,href:n,children:[a&&Object(C.jsx)(a,{className:j.icon,size:"20"}),Object(C.jsx)("span",{className:j.title,children:c})]}):Object(C.jsxs)(le.a,{activeClassName:j.active,className:j.button,component:s.c,to:n,children:[a&&Object(C.jsx)(a,{className:j.icon,size:"20"}),Object(C.jsx)("span",{className:j.title,children:c})]})}))},je=Object(u.a)((function(e){return{mobileDrawer:{width:256},desktopDrawer:{width:256,top:64,height:"calc(100% - 64px)"},avatar:{cursor:"pointer",width:64,height:64},nested:{paddingLeft:e.spacing(4)}}})),be=function(e){var t=e.onMobileClose,n=e.openMobile,c=je(),i=Object(a.useContext)(re).userInfo,r=Object(a.useState)(!0),o=Object(z.a)(r,2),l=o[0],s=o[1];Object(a.useEffect)((function(){n&&t&&t()}),[]);var d=Object(C.jsxs)(E.a,{height:"100%",display:"flex",flexDirection:"column",children:[Object(C.jsxs)(E.a,{alignItems:"center",display:"flex",flexDirection:"column",p:2,children:[Object(C.jsx)(y.a,{className:c.name,color:"textPrimary",variant:"h5",children:i.name}),Object(C.jsx)(y.a,{color:"textSecondary",variant:"body2",children:i.stuId}),Object(C.jsx)(y.a,{color:"textSecondary",variant:"body2",children:$[i.roleId]})]}),Object(C.jsx)(T.a,{}),Object(C.jsx)(E.a,{p:2,children:Object(C.jsxs)(D.a,{children:[Object(C.jsx)(ue,{href:"/app/userManagement",title:"\u6743\u9650\u7ba1\u7406",icon:H.a}),Object(C.jsx)(ue,{href:"/app/seminar",title:"\u6f14\u8bb2\u5b89\u6392",icon:R.a}),Object(C.jsx)(ue,{href:"/app/recorder",title:"\u8f85\u8bfb\u5b89\u6392",icon:R.a}),(30===i.roleId||10===i.roleId)&&Object(C.jsx)(ue,{href:"http://10.176.36.7/",title:"Lab \u7ba1\u7406",icon:q.a,isToOutLink:!0}),Object(C.jsx)(ue,{onClick:function(){return s(!l)},title:"\u63a8\u8350\u8bba\u6587\u7ba1\u7406",icon:U.a,endIcon:l?Object(C.jsx)(Y.a,{}):Object(C.jsx)(K.a,{}),nestedItem:!0}),Object(C.jsx)(F.a,{in:l,timeout:"auto",unmountOnExit:!0,children:Object(C.jsxs)(D.a,{component:"div",disablePadding:!0,children:[Object(C.jsx)(ue,{href:"/app/essayRecommendation/classes",title:"\u8bba\u6587\u5206\u7c7b",className:c.nested}),Object(C.jsx)(ue,{href:"/app/essayRecommendation/essays",title:"\u8bba\u6587\u5217\u8868",className:c.nested})]})}),Object(C.jsx)(ue,{href:"/app/studyPlan",title:"\u57f9\u517b\u65b9\u6848\u7ba1\u7406",icon:V.a}),(60===i.roleId||10===i.roleId)&&Object(C.jsx)(ue,{href:"/app/bulletinManage",title:"\u901a\u77e5\u7ba1\u7406",icon:_.a,isToOutLink:!1}),Object(C.jsx)(ue,{href:"/app/device",title:"\u8d44\u6e90\u7ba1\u7406",icon:A.a})]})}),Object(C.jsx)(E.a,{flexGrow:1})]});return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(M.a,{lgUp:!0,children:Object(C.jsx)(L.a,{anchor:"left",classes:{paper:c.mobileDrawer},onClose:t,open:n,variant:"temporary",children:d})}),Object(C.jsx)(M.a,{mdDown:!0,children:Object(C.jsx)(L.a,{anchor:"left",classes:{paper:c.desktopDrawer},open:!0,variant:"persistent",children:d})})]})};be.defaultProps={onMobileClose:function(){},openMobile:!1};var he=be,xe=n(474),me=n(475),Oe=n(431),pe=n(166),fe=n(85),ve=n(432),ge=n(433),ye=n(476),Ce=n(287),ke=n.n(Ce),Se=n(284),Ie=n.n(Se),we=n(285),Ne=n.n(we),We=Object(u.a)((function(){return{root:{},avatar:{width:60,height:60},logo:{color:"white",fontSize:"larger"}}})),Be=function(e){var t=e.className,n=e.onMobileNavOpen,i=Object(p.a)(e,["className","onMobileNavOpen"]),r=We(),l=Object(d.g)(),u=Object(a.useContext)(re).userInfo,j=Object(a.useState)(0),b=Object(z.a)(j,2),h=b[0],x=b[1],m=function(){w.a.remove("loggedIn",{path:"/"}),l.push("/main/login")};Object(a.useEffect)((function(){return fetch("".concat("http://39.106.33.127/u/bulletin/state"),{}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){var t,n;return x(((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.totalCount)||0)-((null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.readCount)||0))}))}),[]);var O=c.a.useRef(null),k=Object(a.useState)(!1),S=Object(z.a)(k,2),I=S[0],N=S[1],W=function(e){O.current&&O.current.contains(e.target)||N(!1)},B=function(e){"Tab"===e.key&&(e.preventDefault(),N(!1))},P=Object(a.useRef)(I);return Object(a.useEffect)((function(){!0===P.current&&!1===I&&O.current.focus(),P.current=I}),[I]),Object(C.jsx)(v.a,Object(o.a)(Object(o.a)({className:Object(f.a)(r.root,t),elevation:0},i),{},{children:Object(C.jsxs)(g.a,{children:[Object(C.jsx)(s.b,{to:"/",children:Object(C.jsx)(y.a,{className:r.logo,children:"\u590d\u65e6\u5927\u5b66\u7cfb\u7edf\u8f6f\u4ef6\u4e0e\u5b89\u5168\u5b9e\u9a8c\u5ba4"})}),Object(C.jsx)(E.a,{flexGrow:1}),Object(C.jsxs)(M.a,{mdDown:!0,children:[Object(C.jsx)(xe.a,{color:"inherit",component:s.b,to:"/app/bulletinList/",children:Object(C.jsx)(me.a,{badgeContent:h,color:"error",children:Object(C.jsx)(Ie.a,{})})}),Object(C.jsx)(le.a,{color:"inherit",startIcon:Object(C.jsx)(Ne.a,{}),endIcon:Object(C.jsx)(K.a,{}),ref:O,"aria-controls":I?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:function(){N((function(e){return!e}))},children:u.name}),Object(C.jsx)(Oe.a,{open:I,anchorEl:O.current,role:void 0,transition:!0,disablePortal:!0,children:function(e){var t=e.TransitionProps,n=e.placement;return Object(C.jsx)(pe.a,Object(o.a)(Object(o.a)({},t),{},{style:{transformOrigin:"bottom"===n?"center top":"center bottom"},children:Object(C.jsx)(fe.a,{children:Object(C.jsx)(ve.a,{onClickAway:W,children:Object(C.jsxs)(ge.a,{autoFocusItem:I,id:"menu-list-grow",onKeyDown:B,children:[Object(C.jsx)(ye.a,{component:s.b,to:"/app/updateUserInfo/".concat(u.stuId),children:"\u7f16\u8f91\u8d44\u6599"}),Object(C.jsx)(ye.a,{component:s.b,to:"/main/reset",children:"\u4fee\u6539\u5bc6\u7801"}),Object(C.jsx)(ye.a,{onClick:m,children:"\u9000\u51fa\u767b\u5f55"})]})})})}))}})]}),Object(C.jsx)(M.a,{lgUp:!0,children:Object(C.jsx)(xe.a,{color:"inherit",onClick:n,children:Object(C.jsx)(ke.a,{})})})]})}))},ze=n(96),Pe=n.n(ze),Ee=n(161),Te=function(){var e=Object(Ee.a)(Pe.a.mark((function e(t){var n,a,c,i,r;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.page,a=void 0===n?1:n,c=t.limit,i=void 0===c?10:c,e.prev=1,e.next=4,fetch("".concat("http://39.106.33.127/mng/user/paging","?limit=").concat(i,"&offset=").concat((a-1)*i));case 4:return r=e.sent,e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(1),console.log("Request Failed",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(Ee.a)(Pe.a.mark((function e(){var t;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://39.106.33.127/u/user/info");case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log("Request Failed",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),Fe=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,display:"flex",height:"100%",overflow:"hidden",width:"100%"},wrapper:Object(P.a)({display:"flex",flex:"1 1 auto",overflow:"hidden",paddingTop:64},e.breakpoints.up("lg"),{paddingLeft:256}),contentContainer:{display:"flex",flex:"1 1 auto",overflow:"hidden"},content:{flex:"1 1 auto",height:"100%",overflow:"auto"}}})),Me=function(e){var t=e.routes,n=(Object(d.g)(),Fe()),c=Object(a.useState)({userId:0}),i=Object(z.a)(c,2),r=i[0],l=i[1],s=Object(a.useState)(!1),u=Object(z.a)(s,2),j=u[0],b=u[1];return Object(a.useEffect)((function(){De().then((function(e){(null===e||void 0===e?void 0:e.success)&&l(null===e||void 0===e?void 0:e.data)}))}),[]),0===r.userId?null:Object(C.jsx)(re.Provider,{value:{userInfo:r},children:Object(C.jsxs)("div",{className:n.root,children:[Object(C.jsx)(Be,{onMobileNavOpen:function(){return b(!0)}}),Object(C.jsx)(he,{onMobileClose:function(){return b(!1)},openMobile:j}),Object(C.jsx)("div",{className:n.wrapper,children:Object(C.jsx)("div",{className:n.contentContainer,children:Object(C.jsx)("div",{className:n.content,children:Object(C.jsx)(d.d,{children:t.map((function(e,t){return Object(C.jsx)(N,Object(o.a)({},e),t)}))})})})})]})})},Le=n(16),He=n(477),Re=n(497),qe=function(e){return Object(C.jsx)(Re.a,Object(o.a)({elevation:6,variant:"filled"},e))},Ue=c.a.forwardRef((function(e,t){var n=Object(a.useState)(!0),c=Object(z.a)(n,2),i=c[0],r=c[1],o=e.severity,l=e.text,s=function(t){r(!1),e.onClose&&e.onClose(t)};return Object(a.useImperativeHandle)(t,(function(){return{onClose:function(){r(!1)}}})),Object(C.jsx)(He.a,{ref:t,open:i,autoHideDuration:2e3,onClose:s,anchorOrigin:{vertical:"top",horizontal:"center"},children:Object(C.jsx)(qe,{onClose:s,severity:o||"info",children:l})})})),Ve=function(e){var t=document.createElement("div"),n=c.a.createRef();return r.a.render(Object(C.jsx)(Ue,Object(o.a)(Object(o.a)({},e),{},{ref:n,onClose:function(n){e.onClose&&e.onClose(n),t&&document.body.removeChild(t)}})),t),document.body.appendChild(t),{close:function(){var e;null===n||void 0===n||null===(e=n.current)||void 0===e||e.onClose(),t&&document.body.removeChild(t)}}},_e=function(e){var t=new FormData;return Object.keys(e).forEach((function(n){t.append(n,e[n])})),t},Ae=function(e){var t=new URLSearchParams;return Object.keys(e).forEach((function(n){t.append(n,e[n])})),t},Ge=function(e){var t=e.url,n=e.values,a=void 0===n?{}:n,c=e.successCallback,i=e.errorCallback,r=e.type;fetch(t,{method:void 0===r?"POST":r,headers:{"content-type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){(null===e||void 0===e?void 0:e.success)?c&&c():(Ve({text:(null===e||void 0===e?void 0:e.msg)||"\u64cd\u4f5c\u5931\u8d25",severity:"error"}),i&&i())}))},Ye=function(e){var t=e.url,n=e.successCallback;fetch(t,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){Ve({text:(null===e||void 0===e?void 0:e.success)?"\u5220\u9664\u6210\u529f":(null===e||void 0===e?void 0:e.msg)||"\u5220\u9664\u5931\u8d25",severity:(null===e||void 0===e?void 0:e.success)?"success":"error"}),n&&n()}))},Je=n(12),Ke=n(478),$e=n(479),Qe=n(293),Xe=Object(a.forwardRef)((function(e,t){var n=e.children,a=e.title,c=void 0===a?"":a,i=Object(p.a)(e,["children","title"]);return Object(C.jsxs)("div",Object(o.a)(Object(o.a)({ref:t},i),{},{children:[Object(C.jsx)(Qe.a,{children:Object(C.jsx)("title",{children:c})}),n]}))})),Ze=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,height:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},link:{textAlign:"right"}}}));var et=function(){var e=Ze(),t=Object(d.g)();return Object(C.jsx)(Xe,{className:e.root,title:"Login",children:Object(C.jsx)(E.a,{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",children:Object(C.jsx)(Ke.a,{maxWidth:"sm",children:Object(C.jsx)(Le.a,{initialValues:{stuId:"",password:""},validationSchema:Je.b().shape({stuId:Je.c().max(255).required("ID is required"),password:Je.c().max(255).required("Password is required")}),onSubmit:function(e){!function(e){var t=e.url,n=e.values,a=void 0===n?{}:n,c=e.successCallback,i=e.errorCallback,r=e.type;fetch(t,{method:void 0===r?"POST":r,headers:{"content-type":"application/x-www-form-urlencoded"},body:Ae(a)}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){(null===e||void 0===e?void 0:e.success)?c&&c():(Ve({text:(null===e||void 0===e?void 0:e.msg)||"\u64cd\u4f5c\u5931\u8d25",severity:"error"}),i&&i())}))}({url:"http://39.106.33.127/u/user/login",values:e,successCallback:function(){w.a.save("loggedIn","yes",{path:"/"}),console.log("logged in"),t.replace("/app/seminar")},errorCallback:function(){window.location.reload()}})},children:function(e){var t=e.errors,n=e.handleBlur,a=e.handleChange,c=e.handleSubmit,i=e.isSubmitting,r=e.touched;e.values;return Object(C.jsxs)("form",{onSubmit:c,children:[Object(C.jsx)(E.a,{mb:3,children:Object(C.jsx)(y.a,{color:"textPrimary",variant:"h2",children:"\u767b\u5f55"})}),Object(C.jsx)($e.a,{error:Boolean(r.stuId&&t.stuId),fullWidth:!0,helperText:r.stuId&&t.stuId,label:"\u5b66/\u5de5\u53f7",margin:"normal",name:"stuId",onBlur:n,onChange:a,variant:"outlined"}),Object(C.jsx)($e.a,{error:Boolean(r.password&&t.password),fullWidth:!0,helperText:r.password&&t.password,label:"\u5bc6\u7801",margin:"normal",name:"password",onBlur:n,onChange:a,type:"password",variant:"outlined"}),Object(C.jsx)(E.a,{my:2,children:Object(C.jsx)(le.a,{color:"primary",disabled:i,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"\u767b\u5f55"})})]})}})})})})},tt=n(82),nt=n.n(tt),at=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,height:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},return:{float:"right"}}})),ct=function(){var e=at(),t=Object(d.g)();return Object(C.jsx)(Xe,{className:e.root,title:"\u4fee\u6539\u5bc6\u7801",children:Object(C.jsx)(E.a,{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",children:Object(C.jsx)(Ke.a,{maxWidth:"sm",children:Object(C.jsx)(Le.a,{initialValues:{oldPassword:"",newPassword:""},validationSchema:Je.b().shape({newPassword:Je.c().max(255).required("Password is required"),oldPassword:Je.c().max(255).required("Password is required")}),onSubmit:function(e){Ge({url:"http://39.106.33.127/u/user/reset",values:e,successCallback:function(){t.goBack()}})},children:function(n){var a=n.errors,c=n.handleBlur,i=n.handleChange,r=n.handleSubmit,o=n.isSubmitting,l=n.touched;n.values;return Object(C.jsxs)("form",{onSubmit:r,children:[Object(C.jsx)(E.a,{mb:3,children:Object(C.jsxs)(y.a,{align:"justify",gutterBottom:!0,color:"textPrimary",variant:"h2",children:["\u4fee\u6539\u5bc6\u7801",Object(C.jsx)(le.a,{className:e.return,endIcon:Object(C.jsx)(nt.a,{}),onClick:t.goBack,children:"\u8fd4\u56de"})]})}),Object(C.jsx)($e.a,{error:Boolean(l.password&&a.password),fullWidth:!0,helperText:l.password&&a.password,label:"\u539f\u5bc6\u7801",margin:"normal",name:"oldPassword",onBlur:c,onChange:i,type:"password",variant:"outlined"}),Object(C.jsx)($e.a,{error:Boolean(l.password&&a.password),fullWidth:!0,helperText:l.password&&a.password,label:"\u65b0\u5bc6\u7801",margin:"normal",name:"newPassword",onBlur:c,onChange:i,type:"password",variant:"outlined"}),Object(C.jsx)(E.a,{my:2,children:Object(C.jsx)(le.a,{color:"primary",disabled:o,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"\u786e\u8ba4\u4fee\u6539"})})]})}})})})})},it=n(480),rt=Object(u.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{margin:e.spacing(1.5)},textField:{width:"47.9%"}}})),ot=[{value:10,label:"\u5b66\u672f\u578b"},{value:20,label:"\u7ed3\u5408\u578b"},{value:30,label:"\u6280\u672f\u578b"}];function lt(e){var t=e.userDetail,n=rt(),c=Object(d.g)(),i=Object(a.useContext)(re).userInfo,r=Object(Le.b)({initialValues:t,onSubmit:function(e){Ge({url:10===i.roleId?"http://39.106.33.127/mng/user/update":"http://39.106.33.127/u/user/update",values:e,successCallback:function(){Ve({text:"\u4fee\u6539\u6210\u529f",severity:"success"}),c.goBack()}})}}),o=r.errors,l=r.handleBlur,s=r.handleChange,u=r.handleSubmit,j=(r.isSubmitting,r.touched),b=r.values;return Object(C.jsxs)("form",{onSubmit:u,className:n.root,children:[Object(C.jsx)($e.a,{label:"\u7528\u6237\u59d3\u540d",fullWidth:!0,name:"name",value:b.name,variant:"outlined",InputProps:{readOnly:!0},className:n.margin}),Object(C.jsx)($e.a,{label:"\u5b66/\u5de5\u53f7",fullWidth:!0,name:"stuId",value:b.stuId,variant:"outlined",InputProps:{readOnly:!0},className:n.margin}),Object(C.jsx)($e.a,{error:Boolean(j.name&&o.name),label:"\u624b\u673a",name:"telephone",className:Object(f.a)(n.margin,n.textField),onBlur:l,onChange:s,variant:"outlined",value:b.telephone,max:11,type:"tel"}),Object(C.jsx)($e.a,{error:Boolean(j.name&&o.name),label:"\u90ae\u7bb1",name:"email",className:Object(f.a)(n.margin,n.textField),onBlur:l,onChange:s,variant:"outlined",value:b.email,type:"email"}),Object(C.jsx)($e.a,{error:Boolean(j.name&&o.name),label:"\u5bfc\u5e08",name:"mentor",className:Object(f.a)(n.margin,n.textField),onBlur:l,onChange:s,variant:"outlined",value:b.mentor}),Object(C.jsx)($e.a,{error:Boolean(j.name&&o.name),label:"\u6c47\u62a5\u4eba",name:"leader",className:Object(f.a)(n.margin,n.textField),onBlur:l,onChange:s,variant:"outlined",value:b.leader}),Object(C.jsx)($e.a,{error:Boolean(j.name&&o.name),select:!0,label:"\u5c31\u8bfb\u7c7b\u578b",name:"studyType",className:Object(f.a)(n.margin,n.textField),onBlur:l,onChange:s,variant:"outlined",value:b.studyType,SelectProps:{native:!0},children:ot.map((function(e){return Object(C.jsx)("option",{value:e.value,children:e.label},e.value)}))}),Object(C.jsxs)($e.a,{error:Boolean(j.name&&o.name),select:!0,label:"\u662f\u5426\u79d1\u7855",name:"keshuo",className:Object(f.a)(n.margin,n.textField),onBlur:l,onChange:s,variant:"outlined",value:b.keshuo,SelectProps:{native:!0},children:[Object(C.jsx)("option",{value:0,children:"\u5426"}),Object(C.jsx)("option",{value:1,children:"\u662f"})]}),Object(C.jsx)($e.a,{error:Boolean(j.name&&o.name),multiline:!0,fullWidth:!0,rows:4,label:"\u8bba\u6587",name:"papers",className:n.margin,onBlur:l,onChange:s,variant:"outlined",value:b.papers}),Object(C.jsx)($e.a,{error:Boolean(j.name&&o.name),multiline:!0,fullWidth:!0,rows:4,label:"\u4e13\u5229",name:"patents",className:n.margin,onBlur:l,onChange:s,variant:"outlined",value:b.patents}),Object(C.jsx)($e.a,{error:Boolean(j.name&&o.name),multiline:!0,fullWidth:!0,rows:4,label:"\u670d\u52a1",name:"services",className:n.margin,onBlur:l,onChange:s,variant:"outlined",value:b.services}),Object(C.jsx)($e.a,{error:Boolean(j.name&&o.name),multiline:!0,fullWidth:!0,rows:4,label:"\u9879\u76ee",name:"projects",className:n.margin,onBlur:l,onChange:s,variant:"outlined",value:b.projects}),Object(C.jsx)(E.a,{my:2,className:n.margin,children:Object(C.jsx)(le.a,{color:"primary",fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"\u63d0\u4ea4"})})]})}var st=Object(u.a)((function(e){return{header:{display:"flex",justifyContent:"space-between",padding:"16px","& p":{lineHeight:2}},box:{padding:"16px"}}}));var dt=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,height:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},image:{marginTop:50,display:"inline-block",maxWidth:"100%",width:560}}})),ut=function(){var e=dt();return Object(C.jsx)(Xe,{className:e.root,title:"404",children:Object(C.jsx)(E.a,{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",children:Object(C.jsxs)(Ke.a,{maxWidth:"md",children:[Object(C.jsx)(y.a,{align:"center",color:"textPrimary",variant:"h1",children:"404: The page you are looking for isn\u2019t here"}),Object(C.jsx)(y.a,{align:"center",color:"textPrimary",variant:"subtitle2",children:"You either tried some shady route or you came here by mistake. Whichever it is, try using the navigation"}),Object(C.jsx)(E.a,{textAlign:"center",children:Object(C.jsx)("img",{alt:"Under development",className:e.image,src:"/static/images/undraw_page_not_found_su7k.svg"})})]})})})},jt=n(484),bt=n(485),ht=n(486),xt=n(487),mt=n(488),Ot=n(496),pt=function(){return Object(C.jsx)("div",{style:{padding:90,textAlign:"center"},children:Object(C.jsx)("img",{src:"/loading.gif",alt:""})})},ft=function(e){var t=e.msg;return Object(C.jsxs)("div",{style:{padding:60,textAlign:"center"},children:[Object(C.jsx)("img",{src:"/no-data.png",alt:"",width:150}),Object(C.jsx)("p",{style:{marginTop:20,fontSize:14},children:t||"\u6682\u65e0\u6570\u636e"})]})},vt=n(481),gt=n(482),yt=n(483),Ct=c.a.forwardRef((function(e,t){var n=Object(a.useState)(!0),c=Object(z.a)(n,2),i=c[0],r=c[1],o=e.title,l=e.other,s=e.handleCorfirm,d=function(t){r(!1),e.onClose&&e.onClose(t)};return Object(a.useImperativeHandle)(t,(function(){return{onClose:function(){r(!1)}}})),Object(C.jsxs)(vt.a,{open:i,onClose:d,"aria-labelledby":"responsive-dialog-title",children:[Object(C.jsx)(gt.a,{children:Object(C.jsxs)("div",{style:{padding:"45px 30px"},children:[Object(C.jsx)("h4",{style:{fontSize:16},children:o}),l&&Object(C.jsx)("p",{style:{fontSize:14,marginTop:16},children:l})]})}),Object(C.jsxs)(yt.a,{style:{justifyContent:"center"},children:[Object(C.jsx)(le.a,{autoFocus:!0,onClick:d,variant:"contained",children:"\u53d6\u6d88"}),Object(C.jsx)(le.a,{onClick:s,variant:"contained",color:"primary",style:{marginLeft:16},autoFocus:!0,children:"\u786e\u5b9a"})]})]})})),kt=function(e){var t=document.createElement("div"),n=c.a.createRef();return r.a.render(Object(C.jsx)(Ct,Object(o.a)(Object(o.a)({},e),{},{ref:n,onClose:function(n){e.onClose&&e.onClose(n),t&&document.body.removeChild(t)}})),t),document.body.appendChild(t),{close:function(){var e;null===n||void 0===n||null===(e=n.current)||void 0===e||e.onClose(),t&&document.body.removeChild(t)}}},St=Object(u.a)((function(e){return{}})),It=function(e){var t=e.onClose,n=e.open,a=e.users,c=(St(),function(){t()});return Object(C.jsx)(vt.a,{onClose:c,open:n,children:Object(C.jsx)(Le.a,{initialValues:{theme:"",date:"2021-01-24",speakerId:null},validationSchema:Je.b().shape({theme:Je.c().required(),date:Je.c().required(),speakerId:Je.a().required()}),onSubmit:function(e){Ge({url:"http://39.106.33.127/seminar/add",values:e,successCallback:function(){console.log("\u6dfb\u52a0\u6210\u529f"),c()}})},children:function(e){e.errors;var t=e.handleBlur,n=e.handleChange,c=e.handleSubmit,i=(e.isSubmitting,e.touched,e.values);return Object(C.jsxs)("form",{onSubmit:c,className:"dialogForm",children:[Object(C.jsx)(E.a,{mb:1,children:Object(C.jsx)(y.a,{color:"textPrimary",variant:"h6",children:"\u6dfb\u52a0\u6f14\u8bb2\u5b89\u6392"})}),Object(C.jsx)($e.a,{fullWidth:!0,label:"\u6f14\u8bb2\u4e3b\u9898",margin:"normal",name:"theme",onBlur:t,onChange:n,variant:"outlined"}),Object(C.jsxs)($e.a,{select:!0,fullWidth:!0,label:"\u4e3b\u8bb2\u4eba",name:"speakerId",margin:"normal",onChange:n,variant:"outlined",SelectProps:{native:!0},children:[Object(C.jsx)("option",{value:null,children:" \u8bf7\u9009\u62e9"}),a.map((function(e){return Object(C.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(C.jsx)($e.a,{label:"\u65f6\u95f4",type:"date",margin:"normal",fullWidth:!0,name:"date",value:i.date,onChange:n,InputLabelProps:{shrink:!0}}),Object(C.jsx)(E.a,{my:2,children:Object(C.jsx)(le.a,{color:"primary",fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"\u63d0\u4ea4"})})]})}})})},wt=Object(u.a)((function(){return{root:{"& input":{maxWidth:"8rem"},"& button":{background:"#2f3c88",color:"white",fontWeight:500,marginLeft:"5px",verticalAlign:"bottom"}}}}));var Nt=function(e){var t=e.seminar,n=wt();return Object(C.jsx)(Le.a,{initialValues:{link:(null===t||void 0===t?void 0:t.link)||""},validationSchema:Je.b().shape({link:Je.c().required()}),onSubmit:function(e){Ge({url:"http://39.106.33.127/seminar/update",values:Object(o.a)(Object(o.a)({},t),{},{link:e.link}),successCallback:function(){return Ve({text:"\u63d0\u4ea4\u6210\u529f",severity:"success"})}})},children:function(e){var t=e.handleChange,a=e.handleSubmit,c=e.values;return Object(C.jsxs)("form",{onSubmit:a,className:n.root,children:[Object(C.jsx)($e.a,{onChange:t,size:"small",name:"link",label:"\u8bf7\u586b\u5199\u8d44\u6e90\u94fe\u63a5",value:c.link}),Object(C.jsx)(le.a,{size:"small",type:"submit",children:"\u63d0\u4ea4"})]})}})},Wt=Object(u.a)((function(e){return{root:{},actions:{justifyContent:"flex-end"},td:{maxWidth:"200px"},header:{display:"flex",justifyContent:"space-between",padding:"16px","& p":{lineHeight:2}},Pagination:{padding:e.spacing(2),"& .MuiPagination-ul":{justifyContent:"center"}}}})),Bt=function(){var e=Wt(),t=Object(a.useState)(!1),n=Object(z.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)([]),o=Object(z.a)(r,2),l=o[0],s=o[1],d=Object(a.useState)([]),u=Object(z.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)(!1),x=Object(z.a)(h,2),m=x[0],O=x[1],p=Object(a.useContext)(re).userInfo,f=Object(a.useState)(!0),v=Object(z.a)(f,2),g=v[0],k=v[1],S=Object(a.useState)(1),I=Object(z.a)(S,2),w=I[0],N=I[1],W=Object(a.useState)(0),B=Object(z.a)(W,2),P=B[0],D=B[1];Object(a.useEffect)((function(){Te({page:1,limit:1999}).then((function(e){b((null===e||void 0===e?void 0:e.data)||[])}))}),[]);var F=function(e){var t=e.seminar;return t.link?Object(C.jsx)(se.a,{href:t.link,title:t.link,children:"\u53bb\u67e5\u770b"}):"\u6682\u672a\u4e0a\u4f20"};Object(a.useEffect)((function(){fetch("".concat("http://39.106.33.127/seminar/paging","?limit=10&offset=").concat(10*(w-1)),{}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){var t;s((null===e||void 0===e?void 0:e.data)||[]),D(Math.ceil((null===e||void 0===e||null===(t=e.paging)||void 0===t?void 0:t.total)/10)||0)})).finally((function(){return k(!1)}))}),[c,w]);var M=10===p.roleId||20===p.roleId;return Object(C.jsxs)("div",{children:[Object(C.jsxs)(it.a,{className:e.root,children:[Object(C.jsxs)(E.a,{className:e.header,children:[Object(C.jsx)(y.a,{color:"textPrimary",size:"small",component:"h2",children:"\u6f14\u8bb2\u5b89\u6392"}),M&&Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"outlined",onClick:function(){O(!0)},children:"\u6dfb\u52a0\u6f14\u8bb2\u5b89\u6392"})]}),Object(C.jsx)(T.a,{}),Object(C.jsx)(E.a,{minWidth:800,children:Object(C.jsxs)(jt.a,{children:[Object(C.jsx)(bt.a,{children:Object(C.jsxs)(ht.a,{children:[Object(C.jsx)(xt.a,{children:"\u65f6\u95f4"}),Object(C.jsx)(xt.a,{children:"\u4e3b\u9898"}),Object(C.jsx)(xt.a,{children:"\u4e3b\u8bb2\u4eba"}),Object(C.jsx)(xt.a,{children:"\u8d44\u6e90\u94fe\u63a5"}),M&&Object(C.jsx)(xt.a,{align:"center",children:"\u64cd\u4f5c"})]})}),Object(C.jsx)(mt.a,{children:l.map((function(t){return Object(C.jsxs)(ht.a,{hover:!0,children:[Object(C.jsx)(xt.a,{children:t.date}),Object(C.jsx)(xt.a,{className:e.td,children:t.theme}),Object(C.jsx)(xt.a,{children:t.speakerName}),Object(C.jsx)(xt.a,{children:p.userId===t.speakerId?Object(C.jsx)(Nt,{seminar:t}):Object(C.jsx)(F,{seminar:t})}),M&&Object(C.jsx)(xt.a,{align:"center",children:Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"text",onClick:function(e){return function(e){var t=kt({title:"\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",handleCorfirm:function(){t.close(),Ye({url:"".concat("http://39.106.33.127/seminar/delete","?id=").concat(e),values:{id:e},successCallback:function(){i((function(e){return!e}))}})}})}(t.id)},children:"\u5220\u9664"})})]},t.id)}))})]})}),P>1&&Object(C.jsx)(Ot.a,{className:e.Pagination,count:P,color:"primary",onChange:function(e,t){return N(t)}}),g&&Object(C.jsx)(pt,{}),!g&&0===(null===l||void 0===l?void 0:l.length)&&Object(C.jsx)(ft,{msg:"\u6682\u672a\u6dfb\u52a0\u6f14\u8bb2"})]}),Object(C.jsx)(It,{open:m,onClose:function(){O(!1),i((function(e){return!e}))},classes:e,users:j})]})},zt=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),Pt=function(){var e=zt();return Object(C.jsx)(Xe,{className:e.root,title:"\u6f14\u8bb2\u5b89\u6392",children:Object(C.jsx)(Ke.a,{maxWidth:!1,children:Object(C.jsx)(Bt,{})})})};function Et(e){var t=e.onClose,n=e.open,a=e.users,c=function(){t()};return Object(C.jsx)(vt.a,{onClose:c,open:n,children:Object(C.jsx)(Le.a,{initialValues:{date:"2021-01-24",recorder1Id:null,recorder2Id:null,summarizerId:null},validationSchema:Je.b().shape({date:Je.c().required(),summarizerId:Je.a().required()}),onSubmit:function(e){Ge({url:"http://39.106.33.127/recorder/add",values:e,successCallback:function(){console.log("\u6dfb\u52a0\u6210\u529f"),c()}})},children:function(e){e.errors,e.handleBlur;var t=e.handleChange,n=e.handleSubmit,c=(e.isSubmitting,e.touched,e.values);return Object(C.jsxs)("form",{onSubmit:n,className:"dialogForm",children:[Object(C.jsx)(E.a,{mb:1,children:Object(C.jsx)(y.a,{color:"textPrimary",variant:"h6",children:"\u6dfb\u52a0\u8f85\u8bfb\u5b89\u6392"})}),Object(C.jsx)($e.a,{label:"\u65f6\u95f4",type:"date",margin:"normal",fullWidth:!0,name:"date",value:c.date,onChange:t,InputLabelProps:{shrink:!0}}),Object(C.jsxs)($e.a,{select:!0,fullWidth:!0,label:"\u8f85\u8bfb\u4eba1",name:"recorder1Id",margin:"normal",onChange:t,variant:"outlined",SelectProps:{native:!0},children:[Object(C.jsx)("option",{value:null,children:" \u8bf7\u9009\u62e9"}),a.map((function(e){return Object(C.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(C.jsxs)($e.a,{select:!0,fullWidth:!0,label:"\u8f85\u8bfb\u4eba2",name:"recorder2Id",margin:"normal",onChange:t,variant:"outlined",SelectProps:{native:!0},children:[Object(C.jsx)("option",{value:null,children:" \u8bf7\u9009\u62e9"}),a.map((function(e){return Object(C.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(C.jsxs)($e.a,{select:!0,fullWidth:!0,label:"\u8bb0\u5f55\u5458",name:"summarizerId",margin:"normal",onChange:t,variant:"outlined",SelectProps:{native:!0},children:[Object(C.jsx)("option",{value:null,children:" \u8bf7\u9009\u62e9"}),a.map((function(e){return Object(C.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(C.jsx)(E.a,{my:2,children:Object(C.jsx)(le.a,{color:"primary",fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"\u63d0\u4ea4"})})]})}})})}var Tt=n(308),Dt=Object(u.a)((function(){return{root:{display:"inline-flex",margin:"5px","& button":{background:"#2f3c88",color:"white",fontWeight:500,marginLeft:"5px",verticalAlign:"bottom"}},label:{lineHeight:"2rem",marginRight:"1rem"}}}));function Ft(e){var t=e.RecorderId,n=e.DocType,c=e.Date,i=e.refresh,r=Object(a.useState)([]),o=Object(z.a)(r,2),l=o[0],s=o[1],d=Object(a.useState)(!1),u=Object(z.a)(d,2),j=u[0],b=u[1],h=Dt(),x=["recorder1Content","recorder2Content","summarizerContent"];return Object(C.jsx)("div",{children:Object(C.jsxs)("form",{className:h.root,children:[Object(C.jsxs)(y.a,{className:h.label,children:["\u8bf7\u63d0\u4ea4 ",c," \u65e5\u7684",["\u4e00\u53f7\u8f85\u8bfb","\u4e8c\u53f7\u8f85\u8bfb","\u4f1a\u8bae\u603b\u7ed3"][n],"\u6587\u4ef6"]}),Object(C.jsx)(Tt.a,{id:"file",type:"file",accept:".doc,.docx,.pdf,.xml",required:!0,onChange:function(e){return function(e){console.log(e.target.files[0]),s(e.target.files[0])}(e)}}),Object(C.jsxs)(le.a,{variant:"outlined",size:"small",onClick:function(){void 0==l||j||(b(!0),function(e){var t=e.url,n=e.values,a=e.successCallback,c=e.errorCallback,i=e.type;fetch(t,{method:void 0===i?"POST":i,body:_e(n)}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){(null===e||void 0===e?void 0:e.success)?a&&a():c&&c()}))}({url:"http://39.106.33.127/recorder/upload",values:Object(P.a)({id:t},x[n],l),successCallback:function(){Ve({text:"\u4e0a\u4f20\u6210\u529f",severity:"success"}),b(!1),i()},errorCallback:function(){return b(!1)}}))},children:[" ",j?"\u4e0a\u4f20\u4e2d\xb7\xb7\xb7":"\u4e0a\u4f20\u6587\u4ef6"]})]})})}var Mt=Object(u.a)((function(e){return{root:{},actions:{justifyContent:"flex-end"},td:{maxWidth:"100px"},header:{display:"flex",justifyContent:"space-between",padding:"16px","& p":{lineHeight:2}},todos:{background:"#3f51b554",padding:"1rem",marginBottom:"5px"},Pagination:{padding:e.spacing(2),"& .MuiPagination-ul":{justifyContent:"center"}}}})),Lt=function(){var e=Mt(),t=Object(a.useState)([]),n=Object(z.a)(t,2),c=n[0],i=n[1],o=Object(a.useState)([]),l=Object(z.a)(o,2),s=l[0],d=l[1],u=Object(a.useState)(!1),j=Object(z.a)(u,2),b=j[0],h=j[1],x=Object(a.useContext)(re).userInfo,m=Object(a.useState)(!1),O=Object(z.a)(m,2),p=O[0],f=O[1],v=Object(a.useState)(!0),g=Object(z.a)(v,2),k=g[0],S=g[1],I=Object(a.useState)(1),w=Object(z.a)(I,2),N=w[0],W=w[1],B=Object(a.useState)(0),P=Object(z.a)(B,2),D=P[0],F=P[1];Object(a.useEffect)((function(){Te({page:1,limit:1999}).then((function(e){d(e.data||[])}))}),[]);var M=function(){fetch("".concat("http://39.106.33.127/recorder/paging","?limit=10&offset=").concat(10*(N-1)),{}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){var t;i(e.data||[]),null===e||void 0===e||null===(t=e.data)||void 0===t||t.map((function(t){var n;if(!t.recorder1&&x.userId===(null===t||void 0===t?void 0:t.recorder1Id)){var a=document.createElement("div");a.id="id1_"+t.id,document.getElementById("todos").appendChild(a),r.a.render(Object(C.jsx)(Ft,{DocType:0,Date:t.date,RecorderId:t.id,refresh:function(){return h(!b)}}),document.getElementById("id1_"+t.id))}if(!t.recorder2&&x.userId===(null===t||void 0===t?void 0:t.recorder2Id)){var c=document.createElement("div");c.id="id2_"+t.id,document.getElementById("todos").appendChild(c),r.a.render(Object(C.jsx)(Ft,{DocType:1,Date:t.date,RecorderId:t.id,refresh:function(){return h(!b)}}),document.getElementById("id2_"+t.id))}if(!t.summary&&x.userId===t.summarizerId){var i=document.createElement("div");i.id="id3_"+t.id,document.getElementById("todos").appendChild(i),r.a.render(Object(C.jsx)(Ft,{DocType:2,Date:t.date,RecorderId:t.id}),document.getElementById("id3_"+t.id))}return F(Math.ceil((null===e||void 0===e||null===(n=e.paging)||void 0===n?void 0:n.total)/10)||0),null}))})).finally((function(){return S(!1)}))};Object(a.useEffect)(M,[b,N]);var L=10===x.roleId||20===x.roleId;return Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{id:"todos",className:e.todos}),Object(C.jsxs)(it.a,{className:e.root,children:[Object(C.jsxs)(E.a,{className:e.header,children:[Object(C.jsx)(y.a,{color:"textPrimary",size:"small",children:"\u8f85\u8bfb\u5b89\u6392"}),L&&Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"outlined",onClick:function(){f(!0)},children:"\u6dfb\u52a0\u8f85\u8bfb\u5b89\u6392"})]}),Object(C.jsx)(T.a,{}),Object(C.jsx)(E.a,{minWidth:800,children:Object(C.jsxs)(jt.a,{children:[Object(C.jsx)(bt.a,{children:Object(C.jsxs)(ht.a,{children:[Object(C.jsx)(xt.a,{align:"center",children:"\u65f6\u95f4"}),Object(C.jsx)(xt.a,{align:"center",children:"\u8f85\u8bfb\u4eba1"}),Object(C.jsx)(xt.a,{align:"center",children:"\u8f85\u8bfb\u4eba2"}),Object(C.jsx)(xt.a,{align:"center",children:"\u8bb0\u5f55\u5458"}),L&&Object(C.jsx)(xt.a,{align:"center",children:"\u64cd\u4f5c"})]})}),Object(C.jsx)(mt.a,{children:c.map((function(e){return Object(C.jsxs)(ht.a,{hover:!0,children:[Object(C.jsx)(xt.a,{align:"center",children:e.date}),Object(C.jsxs)(xt.a,{align:"center",children:[e.recorder1Name,Object(C.jsx)(E.a,{children:e.recorder1File?Object(C.jsx)(le.a,{color:"primary",size:"small",href:e.recorder1FileUrl,children:"\u4e0b\u8f7d"}):"\u6682\u672a\u4e0a\u4f20"})]}),Object(C.jsxs)(xt.a,{align:"center",children:[e.recorder2Name,Object(C.jsx)(E.a,{children:e.recorder2File?Object(C.jsxs)(le.a,{color:"primary",size:"small",href:e.recorder2FileUrl,children:[" ","\u4e0b\u8f7d"]}):"\u6682\u672a\u4e0a\u4f20"})]}),Object(C.jsxs)(xt.a,{align:"center",children:[e.summarizerName,Object(C.jsx)(E.a,{children:e.summarizerFile?Object(C.jsxs)(le.a,{color:"primary",size:"small",href:e.summarizerFileUrl,children:[" ","\u4e0b\u8f7d"]}):"\u6682\u672a\u4e0a\u4f20"})]}),L&&Object(C.jsx)(xt.a,{align:"center",children:Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"text",onClick:function(t){return function(e){var t=kt({title:"\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",handleCorfirm:function(){t.close(),Ye({url:"".concat("http://39.106.33.127/recorder/delete","?id=").concat(e),values:{id:e},successCallback:function(){h((function(e){return!e}))}})}})}(e.id)},children:"\u5220\u9664"})})]},e.id)}))})]})}),D>1&&Object(C.jsx)(Ot.a,{className:e.Pagination,count:D,color:"primary",onChange:function(e,t){return W(t)}}),k&&Object(C.jsx)(pt,{}),!k&&0===(null===c||void 0===c?void 0:c.length)&&Object(C.jsx)(ft,{msg:"\u6682\u672a\u6dfb\u52a0\u8f85\u8bfb\u5b89\u6392"})]}),Object(C.jsx)(Et,{users:s,open:p,onClose:function(){f(!1),M()}})]})},Ht=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),Rt=function(){var e=Ht();return Object(C.jsx)(Xe,{className:e.root,title:"\u8f85\u8bfb\u5b89\u6392",children:Object(C.jsx)(Ke.a,{maxWidth:!1,children:Object(C.jsx)(Lt,{})})})},qt=[{value:10,label:"\u7cfb\u7edf\u7ba1\u7406\u5458"},{value:20,label:"\u8ba8\u8bba\u73ed\u7ba1\u7406\u5458"},{value:30,label:"Lab\u7ba1\u7406\u5458"},{value:40,label:"\u63a8\u8350\u8bba\u6587\u7ba1\u7406\u5458"},{value:50,label:"\u57f9\u517b\u65b9\u6848\u7ba1\u7406\u5458"},{value:60,label:"\u901a\u77e5\u7ba1\u7406\u5458"},{value:0,label:"\u666e\u901a\u7528\u6237"}];var Ut=function(e){var t=e.onClose,n=e.open,a=function(){t()};return Object(C.jsx)(vt.a,{onClose:a,open:n,children:Object(C.jsx)(Le.a,{initialValues:{name:"",stuId:"",roleId:0},validationSchema:Je.b().shape({name:Je.c().max(255).required(),stuId:Je.c().max(255).required(),roleId:Je.a().required()}),onSubmit:function(e){Ge({url:"http://39.106.33.127/mng/user/add",values:e,successCallback:function(){console.log("\u6dfb\u52a0\u7528\u6237\u6210\u529f"),a()}})},children:function(e){var t=e.errors,n=e.handleBlur,a=e.handleChange,c=e.handleSubmit,i=(e.isSubmitting,e.touched),r=e.values;return Object(C.jsxs)("form",{onSubmit:c,className:"dialogForm",children:[Object(C.jsx)(E.a,{mb:1,children:Object(C.jsx)(y.a,{color:"textPrimary",variant:"h4",children:"\u6dfb\u52a0\u65b0\u7528\u6237"})}),Object(C.jsx)($e.a,{error:Boolean(i.name&&t.name),fullWidth:!0,label:"\u7528\u6237\u59d3\u540d",margin:"normal",name:"name",onBlur:n,onChange:a,variant:"outlined"}),Object(C.jsx)($e.a,{error:Boolean(i.stuId&&t.stuId),fullWidth:!0,label:"\u5b66/\u5de5\u53f7",margin:"normal",name:"stuId",onBlur:n,onChange:a,variant:"outlined"}),Object(C.jsx)($e.a,{select:!0,fullWidth:!0,label:"\u6743\u9650",name:"roleId",margin:"normal",onChange:a,variant:"outlined",SelectProps:{native:!0},value:r.roleId,children:qt.map((function(e){return Object(C.jsx)("option",{value:e.value,children:e.label},e.value)}))}),Object(C.jsx)(E.a,{my:2,children:Object(C.jsx)(le.a,{color:"primary",fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"\u63d0\u4ea4"})})]})}})})},Vt=Object(u.a)((function(e){return{header:{display:"flex",justifyContent:"space-between",padding:"16px","& p":{lineHeight:2}},Pagination:{padding:e.spacing(2),"& .MuiPagination-ul":{justifyContent:"center"}}}})),_t=function(e){var t=Object(a.useState)([]),n=Object(z.a)(t,2),i=n[0],r=n[1],o=Object(a.useState)(!1),l=Object(z.a)(o,2),s=l[0],d=l[1],u=Vt(),j=c.a.useState(!1),b=Object(z.a)(j,2),h=b[0],x=b[1],m=Object(a.useContext)(re).userInfo,O=Object(a.useState)(1),p=Object(z.a)(O,2),f=p[0],v=p[1],g=Object(a.useState)(0),k=Object(z.a)(g,2),S=k[0],I=k[1];return Object(a.useEffect)((function(){Te({page:f}).then((function(e){var t;r(e.data||[]),I(Math.ceil((null===e||void 0===e||null===(t=e.paging)||void 0===t?void 0:t.total)/10)||0)}))}),[s,f]),Object(C.jsxs)("div",{children:[Object(C.jsxs)(it.a,{children:[Object(C.jsxs)(E.a,{className:u.header,children:[Object(C.jsx)(y.a,{color:"textPrimary",size:"small",children:"\u7528\u6237\u7ba1\u7406"}),10===m.roleId&&Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"outlined",onClick:function(){x(!0)},children:"\u6dfb\u52a0\u65b0\u7528\u6237"})]}),Object(C.jsx)(T.a,{}),Object(C.jsxs)(E.a,{minWidth:800,children:[Object(C.jsxs)(jt.a,{children:[Object(C.jsx)(bt.a,{children:Object(C.jsxs)(ht.a,{children:[Object(C.jsx)(xt.a,{children:"\u59d3\u540d"}),Object(C.jsx)(xt.a,{children:"\u5b66/\u5de5\u53f7"}),Object(C.jsx)(xt.a,{children:"\u89d2\u8272"}),10===m.roleId&&Object(C.jsx)(xt.a,{align:"center",children:"\u64cd\u4f5c"})]})}),Object(C.jsx)(mt.a,{children:i.map((function(e){return Object(C.jsxs)(ht.a,{hover:!0,children:[Object(C.jsx)(xt.a,{children:e.name}),Object(C.jsx)(xt.a,{children:e.stuId}),Object(C.jsx)(xt.a,{children:$[e.roleId]}),10===m.roleId&&Object(C.jsxs)(xt.a,{align:"center",children:[Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"text",href:"/app/updateUserInfo/".concat(e.stuId),children:"\u7f16\u8f91"}),Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"text",onClick:function(t){return function(e,t){var n=kt({title:"\u786e\u5b9a\u8981\u5220\u9664[".concat(t,"]\u5417\uff1f"),handleCorfirm:function(){n.close(),Ye({url:"".concat("http://39.106.33.127/mng/user/delete","?id=").concat(e),values:{id:e},successCallback:function(){d((function(e){return!e}))}})}})}(e.id,e.name)},children:"\u5220\u9664"})]})]},e.id)}))})]}),S>1&&Object(C.jsx)(Ot.a,{className:u.Pagination,count:S,color:"primary",onChange:function(e,t){return v(t)}})]})]}),Object(C.jsx)(Ut,{open:h,onClose:function(){x(!1),d((function(e){return!e}))}})]})},At=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),Gt=function(){var e=At();return Object(C.jsx)(Xe,{className:e.root,title:"\u7528\u6237\u7ba1\u7406",children:Object(C.jsx)(Ke.a,{maxWidth:!1,children:Object(C.jsx)(_t,{})})})},Yt=n(489),Jt=n(490),Kt=Object(u.a)({root:{minWidth:275,margin:8},title:{fontSize:14,fontWeight:600}});function $t(e){var t=Kt(),n=e.data,a=void 0===n?{}:n,c=e.refresh,i=e.userRoleId,r=e.authType,o=a.name,l=a.id,d=a.articles;return Object(C.jsx)(it.a,{className:t.root,children:Object(C.jsxs)(Yt.a,{children:[Object(C.jsxs)(Jt.a,{container:!0,spacing:1,children:[Object(C.jsx)(Jt.a,{item:!0,md:11,children:Object(C.jsx)(y.a,{className:t.title,color:"textSecondary",gutterBottom:!0,children:o})}),(10==i||i==r)&&Object(C.jsx)(Jt.a,{item:!0,md:1,children:Object(C.jsxs)(le.a,{onClick:function(e){return function(e,t){var n=kt({title:"\u786e\u5b9a\u8981\u5220\u9664[".concat(t,"]\u5417\uff1f"),handleCorfirm:function(){n.close(),Ye({url:"".concat(ee,"?id=").concat(e),values:{id:e},successCallback:c})}})}(l,o)},children:["\u5220\u9664\u7c7b"," "]})})]}),null===d||void 0===d?void 0:d.map((function(e){return Object(C.jsxs)(Jt.a,{container:!0,spacing:1,children:[Object(C.jsx)(Jt.a,{item:!0,md:10,children:Object(C.jsx)(s.b,{to:"/app/article/"+e.id,children:Object(C.jsx)(y.a,{component:"h2",children:e.title})})}),(10==i||i==r)&&Object(C.jsx)(Jt.a,{item:!0,md:1,children:Object(C.jsxs)(le.a,{component:s.b,to:"/app/articleEdit/"+e.id,children:["\u7f16\u8f91"," "]})}),(10==i||i==r)&&Object(C.jsx)(Jt.a,{item:!0,md:1,children:Object(C.jsxs)(le.a,{onClick:function(t){return function(e,t){var n=kt({title:"\u786e\u5b9a\u8981\u5220\u9664[".concat(t,"]\u5417\uff1f"),handleCorfirm:function(){n.close(),Ye({url:"".concat(ae,"?id=").concat(e),values:{id:e},successCallback:c})}})}(e.id,e.title)},children:["\u5220\u9664"," "]})})]},e.id)}))]})})}function Qt(e){var t=e.onClose,n=e.open,a=e.tag,c=function(){t()};return Object(C.jsx)(vt.a,{onClose:c,open:n,children:Object(C.jsx)(Le.a,{initialValues:{name:""},validationSchema:Je.b().shape({name:Je.c().max(255).required()}),onSubmit:function(e){Ge({url:Z,values:Object(o.a)(Object(o.a)({},e),{},{tag:a})}),c()},children:function(e){var t=e.errors,n=e.handleBlur,a=e.handleChange,c=e.handleSubmit,i=(e.isSubmitting,e.touched);e.values;return Object(C.jsxs)("form",{onSubmit:c,className:"dialogForm",children:[Object(C.jsx)(E.a,{mb:1,children:Object(C.jsx)(y.a,{color:"textPrimary",variant:"h4",children:"\u65b0\u5efa\u8bba\u6587\u5206\u7c7b"})}),Object(C.jsx)($e.a,{error:Boolean(i.name&&t.name),fullWidth:!0,label:"\u65b0\u5efa\u7c7b\u540d\u79f0",margin:"normal",name:"name",onBlur:n,onChange:a,variant:"outlined"}),Object(C.jsx)(E.a,{my:2,children:Object(C.jsx)(le.a,{color:"primary",fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"\u63d0\u4ea4"})})]})}})})}function Xt(e){var t=e.onClose,n=e.open,a=e.classes,c=function(){t()};return Object(C.jsx)(vt.a,{onClose:c,open:n,children:Object(C.jsx)(Le.a,{initialValues:{title:"",classID:null,content:""},validationSchema:Je.b().shape({title:Je.c().max(255).required(),classID:Je.a().required()}),onSubmit:function(e){Ge({url:ne,values:e,successCallback:c})},children:function(e){var t=e.errors,n=e.handleBlur,c=e.handleChange,i=e.handleSubmit,r=(e.isSubmitting,e.touched);e.values;return Object(C.jsxs)("form",{onSubmit:i,className:"dialogForm",children:[Object(C.jsx)(E.a,{mb:1,children:Object(C.jsx)(y.a,{color:"textPrimary",variant:"h4",children:"\u65b0\u5efa\u6587\u7ae0"})}),Object(C.jsx)($e.a,{error:Boolean(r.name&&t.name),fullWidth:!0,label:"\u65b0\u5efa\u6587\u7ae0\u540d\u79f0",margin:"normal",name:"title",onBlur:n,onChange:c,variant:"outlined"}),Object(C.jsxs)($e.a,{select:!0,fullWidth:!0,label:"\u6240\u5c5e\u7c7b\u522b",name:"classID",margin:"normal",onChange:c,variant:"outlined",SelectProps:{native:!0},children:[Object(C.jsx)("option",{value:null,children:" \u8bf7\u9009\u62e9"}),a.map((function(e){return Object(C.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(C.jsx)(E.a,{my:2,children:Object(C.jsx)(le.a,{color:"primary",fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"\u63d0\u4ea4"})})]})}})})}var Zt=Object(u.a)((function(e){return{toolbar:{display:"flex",justifyContent:"flex-end","& button":{marginInline:8}}}}));function en(){var e=Zt(),t=Object(a.useState)([]),n=Object(z.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)(!1),o=Object(z.a)(r,2),l=o[0],s=o[1],d=Object(a.useState)(!1),u=Object(z.a)(d,2),j=u[0],b=u[1],h=Object(a.useContext)(re).userInfo,x=function(){fetch(X+"?tag=0",{}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){console.log(e),i((null===e||void 0===e?void 0:e.data)||[])}))};return Object(a.useEffect)(x,[]),Object(C.jsxs)("div",{children:[(10==h.roleId||40==h.roleId)&&Object(C.jsxs)(E.a,{className:e.toolbar,children:[Object(C.jsx)(le.a,{color:"primary",size:"medium",variant:"contained",onClick:function(){s(!0)},children:"\u65b0\u5efa\u7c7b\u522b"}),Object(C.jsx)(le.a,{color:"primary",size:"medium",variant:"contained",onClick:function(){b(!0)},children:"\u65b0\u5efa\u6587\u7ae0"})]}),null===c||void 0===c?void 0:c.map((function(e){return Object(C.jsx)($t,{data:e,refresh:x,userRoleId:h.roleId,authType:40},e.id)})),Object(C.jsx)(Qt,{open:l,onClose:function(){s(!1),x()},tag:0}),Object(C.jsx)(Xt,{open:j,onClose:function(){b(!1),x()},classes:c})]})}var tn=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),nn=function(){var e=tn();return Object(C.jsx)(Xe,{className:e.root,title:"\u63a8\u8350\u8bba\u6587",children:Object(C.jsx)(Ke.a,{maxWidth:!1,children:Object(C.jsx)(en,{})})})},an=Object(u.a)((function(e){return{root:{},actions:{justifyContent:"flex-end"},td:{maxWidth:"200px"},header:{display:"flex",justifyContent:"space-between",padding:"16px","& p":{lineHeight:2}},Pagination:{padding:e.spacing(2),"& .MuiPagination-ul":{justifyContent:"center"}}}})),cn=function(){var e=an(),t=Object(a.useState)(!1),n=Object(z.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)([]),o=Object(z.a)(r,2),l=o[0],s=o[1],d=Object(a.useState)(!0),u=Object(z.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)(1),x=Object(z.a)(h,2),m=x[0],O=x[1],p=Object(a.useState)(0),f=Object(z.a)(p,2),v=f[0],g=f[1],k=Object(a.useContext)(re).userInfo;Object(a.useEffect)((function(){fetch("".concat("http://39.106.33.127/article/paging","?limit=10&offset=").concat(10*(m-1)),{}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){var t;s((null===e||void 0===e?void 0:e.data)||[]),g(Math.ceil((null===e||void 0===e||null===(t=e.paging)||void 0===t?void 0:t.total)/10)||0)})).finally((function(){return b(!1)}))}),[c,m]);var S=10===k.roleId||40===k.roleId;return Object(C.jsx)("div",{children:Object(C.jsxs)(it.a,{className:e.root,children:[Object(C.jsxs)(E.a,{className:e.header,children:[Object(C.jsx)(y.a,{color:"textPrimary",size:"small",children:"\u8bba\u6587\u5217\u8868"}),S&&Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"outlined",href:"/app/articleEdit/0",children:"\u6dfb\u52a0\u8bba\u6587"})]}),Object(C.jsx)(T.a,{}),Object(C.jsx)(E.a,{minWidth:800,children:Object(C.jsxs)(jt.a,{children:[Object(C.jsx)(bt.a,{children:Object(C.jsxs)(ht.a,{children:[Object(C.jsx)(xt.a,{children:"\u5206\u7c7b"}),Object(C.jsx)(xt.a,{children:"\u8bba\u6587\u540d\u79f0"}),Object(C.jsx)(xt.a,{align:"center",children:"\u64cd\u4f5c"})]})}),Object(C.jsx)(mt.a,{children:l.map((function(e){return Object(C.jsxs)(ht.a,{hover:!0,children:[Object(C.jsx)(xt.a,{children:e.categoryName}),Object(C.jsx)(xt.a,{children:e.title}),Object(C.jsxs)(xt.a,{align:"center",children:[Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"text",href:"/app/articleEdit/".concat(e.id),children:S?"\u7f16\u8f91":"\u67e5\u770b"}),S&&Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"text",onClick:function(t){return function(e,t){var n=kt({title:"\u786e\u5b9a\u8981\u5220\u9664[".concat(t,"]\u5417\uff1f"),handleCorfirm:function(){n.close(),Ye({url:"".concat(ae,"?id=").concat(e),values:{id:e},successCallback:function(){i((function(e){return!e}))}})}})}(e.id,e.title)},children:"\u5220\u9664"})]})]},e.id)}))})]})}),v>1&&Object(C.jsx)(Ot.a,{className:e.Pagination,count:v,color:"primary",onChange:function(e,t){return O(t)}}),j&&Object(C.jsx)(pt,{}),!j&&0===(null===l||void 0===l?void 0:l.length)&&Object(C.jsx)(ft,{msg:"\u6682\u672a\u6dfb\u52a0\u8bba\u6587"})]})})},rn=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),on=function(){var e=rn();return Object(C.jsx)(Xe,{className:e.root,title:"\u8bba\u6587\u5217\u8868",children:Object(C.jsx)(Ke.a,{maxWidth:!1,children:Object(C.jsx)(cn,{})})})};function ln(e){var t=e.onClose,n=e.open,a=e.tag,c=function(){t()};return Object(C.jsx)(vt.a,{onClose:c,open:n,children:Object(C.jsx)(Le.a,{initialValues:{name:""},validationSchema:Je.b().shape({name:Je.c().max(255).required()}),onSubmit:function(e){Ge({url:Z,values:Object(o.a)(Object(o.a)({},e),{},{tag:a})}),c()},children:function(e){var t=e.errors,n=e.handleBlur,a=e.handleChange,c=e.handleSubmit,i=(e.isSubmitting,e.touched);e.values;return Object(C.jsxs)("form",{onSubmit:c,className:"dialogForm",children:[Object(C.jsx)(E.a,{mb:1,children:Object(C.jsx)(y.a,{color:"textPrimary",variant:"h4",children:"\u65b0\u5efa\u8bba\u6587\u5206\u7c7b"})}),Object(C.jsx)($e.a,{error:Boolean(i.name&&t.name),fullWidth:!0,label:"\u65b0\u5efa\u7c7b\u540d\u79f0",margin:"normal",name:"name",onBlur:n,onChange:a,variant:"outlined"}),Object(C.jsx)(E.a,{my:2,children:Object(C.jsx)(le.a,{color:"primary",fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"\u63d0\u4ea4"})})]})}})})}var sn=Object(u.a)((function(e){return{root:{},actions:{justifyContent:"flex-end"},td:{maxWidth:"200px"},header:{display:"flex",justifyContent:"space-between",padding:"16px","& p":{lineHeight:2}},Pagination:{padding:e.spacing(2),"& .MuiPagination-ul":{justifyContent:"center"}}}})),dn=function(){var e=sn(),t=Object(a.useState)(!1),n=Object(z.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)([]),o=Object(z.a)(r,2),l=o[0],s=o[1],d=Object(a.useState)(!1),u=Object(z.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)(!0),x=Object(z.a)(h,2),m=x[0],O=x[1],p=Object(a.useState)(1),f=Object(z.a)(p,2),v=f[0],g=f[1],k=Object(a.useState)(0),S=Object(z.a)(k,2),I=S[0],w=S[1],N=Object(a.useContext)(re).userInfo;Object(a.useEffect)((function(){fetch("".concat(X,"?limit=10&offset=").concat(10*(v-1)),{}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){var t;s((null===e||void 0===e?void 0:e.data)||[]),w(Math.ceil((null===e||void 0===e||null===(t=e.paging)||void 0===t?void 0:t.total)/10)||0)})).finally((function(){return O(!1)}))}),[c,v]);var W=10===N.roleId||40===N.roleId;return Object(C.jsxs)("div",{children:[Object(C.jsxs)(it.a,{className:e.root,children:[Object(C.jsxs)(E.a,{className:e.header,children:[Object(C.jsx)(y.a,{color:"textPrimary",size:"small",children:"\u8bba\u6587\u5206\u7c7b"}),W&&Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"outlined",onClick:function(){b(!0)},children:"\u6dfb\u52a0\u8bba\u6587\u5206\u7c7b"})]}),Object(C.jsx)(T.a,{}),Object(C.jsx)(E.a,{minWidth:800,children:Object(C.jsxs)(jt.a,{children:[Object(C.jsx)(bt.a,{children:Object(C.jsxs)(ht.a,{children:[Object(C.jsx)(xt.a,{children:"\u7f16\u53f7"}),Object(C.jsx)(xt.a,{children:"\u540d\u79f0"}),W&&Object(C.jsx)(xt.a,{align:"center",children:"\u64cd\u4f5c"})]})}),Object(C.jsx)(mt.a,{children:l.map((function(e){return Object(C.jsxs)(ht.a,{hover:!0,children:[Object(C.jsx)(xt.a,{children:e.id}),Object(C.jsx)(xt.a,{children:e.name}),W&&Object(C.jsx)(xt.a,{align:"center",children:Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"text",onClick:function(t){return function(e,t){var n=kt({title:"\u786e\u5b9a\u8981\u5220\u9664[".concat(t,"]\u5417\uff1f"),handleCorfirm:function(){n.close(),Ye({url:"".concat(ee,"?id=").concat(e),values:{id:e},successCallback:function(){i((function(e){return!e}))}})}})}(e.id,e.name)},children:"\u5220\u9664"})})]},e.id)}))})]})}),I>1&&Object(C.jsx)(Ot.a,{className:e.Pagination,count:I,color:"primary",onChange:function(e,t){return g(t)}}),m&&Object(C.jsx)(pt,{}),!m&&0===(null===l||void 0===l?void 0:l.length)&&Object(C.jsx)(ft,{msg:"\u6682\u672a\u6dfb\u52a0\u8bba\u6587\u5206\u7c7b"})]}),Object(C.jsx)(ln,{open:j,onClose:function(){b(!1),i((function(e){return!e}))},tag:0})]})},un=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),jn=function(){var e=un();return Object(C.jsx)(Xe,{className:e.root,title:"\u8bba\u6587\u5206\u7c7b",children:Object(C.jsx)(Ke.a,{maxWidth:!1,children:Object(C.jsx)(dn,{})})})},bn=Object(u.a)((function(){return{article:{margin:"4%",padding:"4%",boxShadow:"2px 2px 2px 1px rgba(0, 0, 0, 0.2)",backgroundColor:"white"},header:{marginBottom:"2%"}}}));var hn=n(301),xn=Object(u.a)((function(e){return{root:{padding:e.spacing(3)},article:{margin:"4%",padding:"4%",boxShadow:"2px 2px 2px 1px rgba(0, 0, 0, 0.2)",backgroundColor:"white"},flexHeader:{display:"flex",alignItems:"center"},header:{marginBottom:"2%","& button":{marginLeft:5},"& h4":{margin:5,lineHeight:2,fontWeight:600,flex:1}},footer:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:12,"& button":{margin:20}}}}));var mn=Object(u.a)((function(e){return{toolbar:{display:"flex",justifyContent:"flex-end","& button":{marginInline:8}}}}));function On(){var e=mn(),t=Object(a.useState)([]),n=Object(z.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)(!1),o=Object(z.a)(r,2),l=o[0],s=o[1],d=Object(a.useState)(!1),u=Object(z.a)(d,2),j=u[0],b=u[1],h=Object(a.useContext)(re).userInfo,x=function(){fetch(X+"?tag=1",{}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){console.log(e),i((null===e||void 0===e?void 0:e.data)||[])}))};return Object(a.useEffect)(x,[]),Object(C.jsxs)("div",{children:[(10==h.roleId||50==h.roleId)&&Object(C.jsxs)(E.a,{className:e.toolbar,children:[Object(C.jsx)(le.a,{color:"primary",size:"medium",variant:"contained",onClick:function(){s(!0)},children:"\u65b0\u5efa\u7c7b\u522b"}),Object(C.jsx)(le.a,{color:"primary",size:"medium",variant:"contained",onClick:function(){b(!0)},children:"\u65b0\u5efa\u6587\u7ae0"})]}),c.map((function(e){return Object(C.jsx)($t,{data:e,refresh:x,userRoleId:h.roleId,authType:4},e.id)})),Object(C.jsx)(Qt,{open:l,onClose:function(){s(!1),x()},tag:1}),Object(C.jsx)(Xt,{open:j,onClose:function(){b(!1),x()},classes:c})]})}var pn=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),fn=function(){var e=pn();return Object(C.jsx)(Xe,{className:e.root,title:"\u57f9\u517b\u65b9\u6848",children:Object(C.jsx)(Ke.a,{maxWidth:!1,children:Object(C.jsx)(On,{})})})},vn=n(491),gn=Object(u.a)((function(e){return{root:{padding:e.spacing(3)}}}));function yn(e){var t=e.onClose,n=e.open,c=e.planDetail,i=Object(a.useState)([]),r=Object(z.a)(i,2),o=r[0],l=r[1],s=(gn(),function(){t()});return Object(a.useEffect)((function(){fetch("".concat(ce,"?limit=100"),{}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){l((null===e||void 0===e?void 0:e.data)||[])}))}),[]),Object(C.jsxs)(vt.a,{onClose:s,open:n,children:[Object(C.jsx)(vn.a,{onClose:s,children:(null===c||void 0===c?void 0:c.id)?"\u7f16\u8f91\u57f9\u517b\u8ba1\u5212":"\u65b0\u589e\u57f9\u517b\u8ba1\u5212"}),Object(C.jsx)(Le.a,{initialValues:c,onSubmit:function(e){Ge({url:(null===c||void 0===c?void 0:c.id)>0?"http://39.106.33.127/mng/study/plan/update":"http://39.106.33.127/mng/study/plan/add",values:e,successCallback:function(){Ve({text:"\u64cd\u4f5c\u6210\u529f",severity:"success"}),s()}})},children:function(e){e.errors;var t=e.handleBlur,n=e.handleChange,a=e.handleSubmit,i=(e.isSubmitting,e.touched,e.values);return Object(C.jsxs)("form",{onSubmit:a,className:"dialogForm",children:[Object(C.jsx)($e.a,{label:"\u540d\u79f0",fullWidth:!0,margin:"normal",name:"name",value:i.name,variant:"outlined",onBlur:t,onChange:n}),Object(C.jsx)($e.a,{label:"\u5165\u5b66\u5e74\u4efd",margin:"normal",fullWidth:!0,name:"enrollYear",value:i.enrollYear,variant:"outlined",onBlur:t,onChange:n,disabled:(null===c||void 0===c?void 0:c.id)>0}),!(null===c||void 0===c?void 0:c.id)&&Object(C.jsxs)($e.a,{select:!0,fullWidth:!0,label:"\u662f\u5426\u9009\u62e9\u6a21\u677f\u521b\u5efa",name:"templateId",margin:"normal",onChange:n,variant:"outlined",SelectProps:{native:!0},children:[Object(C.jsx)("option",{value:0,children:"\u5426"}),null===o||void 0===o?void 0:o.map((function(e){return Object(C.jsx)("option",{value:e.id,children:null===e||void 0===e?void 0:e.name},e.id)}))]}),Object(C.jsx)(E.a,{my:2,children:Object(C.jsx)(le.a,{color:"primary",size:"large",type:"submit",variant:"contained",fullWidth:!0,children:"\u63d0\u4ea4"})})]})}})]})}var Cn=Object(u.a)((function(e){return{root:{},actions:{justifyContent:"flex-end"},td:{maxWidth:"200px"},header:{display:"flex",justifyContent:"space-between",padding:"16px","& p":{lineHeight:2}},Pagination:{padding:e.spacing(2),"& .MuiPagination-ul":{justifyContent:"center"}}}})),kn=function(){var e=Cn(),t=Object(a.useState)(!1),n=Object(z.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)([]),o=Object(z.a)(r,2),l=o[0],s=o[1],d=Object(a.useState)({}),u=Object(z.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)(!1),x=Object(z.a)(h,2),m=x[0],O=x[1],p=Object(a.useContext)(re).userInfo,f=Object(a.useState)(!0),v=Object(z.a)(f,2),g=v[0],k=v[1],S=Object(a.useState)(1),I=Object(z.a)(S,2),w=I[0],N=I[1],W=Object(a.useState)(0),B=Object(z.a)(W,2),P=B[0],D=B[1],F=10===p.roleId||50===p.roleId,M=function(){O(!0)};return Object(a.useEffect)((function(){fetch("".concat(F?ce:"http://39.106.33.127/u/study/plan/allocation/list","?limit=10&offset=").concat(10*(w-1)),{}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){var t;s((null===e||void 0===e?void 0:e.data)||[]),D(Math.ceil((null===e||void 0===e||null===(t=e.paging)||void 0===t?void 0:t.total)/10)||0)})).finally((function(){return k(!1)}))}),[c,w]),Object(C.jsxs)("div",{children:[Object(C.jsxs)(it.a,{className:e.root,children:[Object(C.jsxs)(E.a,{className:e.header,children:[Object(C.jsx)(y.a,{color:"textPrimary",size:"small",children:"\u57f9\u517b\u8ba1\u5212"}),F&&Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"outlined",onClick:M,children:"\u6dfb\u52a0\u57f9\u517b\u8ba1\u5212"})]}),Object(C.jsx)(T.a,{}),Object(C.jsx)(E.a,{minWidth:800,children:Object(C.jsxs)(jt.a,{children:[Object(C.jsx)(bt.a,{children:Object(C.jsxs)(ht.a,{children:[Object(C.jsx)(xt.a,{children:"\u7f16\u53f7"}),Object(C.jsx)(xt.a,{children:"\u540d\u79f0"}),Object(C.jsx)(xt.a,{children:"\u5165\u5b66\u5e74\u4efd"}),Object(C.jsx)(xt.a,{align:"center",children:"\u64cd\u4f5c"})]})}),Object(C.jsx)(mt.a,{children:l.map((function(e){return Object(C.jsxs)(ht.a,{hover:!0,children:[Object(C.jsx)(xt.a,{children:F?e.id:e.planId}),Object(C.jsx)(xt.a,{children:e.name}),Object(C.jsx)(xt.a,{children:e.enrollYear}),Object(C.jsxs)(xt.a,{align:"center",children:[Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"text",href:"/app/studyPlan/detail/".concat(F?e.id:e.planId),children:"\u67e5\u770b\u8be6\u60c5"}),F&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"text",onClick:function(t){b(e),M()},children:"\u7f16\u8f91"}),Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"text",href:"/app/studyPlan/planAllocation/".concat(e.id),children:"\u4efb\u52a1\u5206\u914d"}),Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"text",onClick:function(t){return function(e,t){var n=kt({title:"\u786e\u5b9a\u8981\u5220\u9664[".concat(t,"]\u5417\uff1f"),handleCorfirm:function(){n.close(),Ye({url:"".concat("http://39.106.33.127/mng/study/plan/delete","?id=").concat(e),values:{id:e},successCallback:function(){i((function(e){return!e}))}})}})}(e.id,e.name)},children:"\u5220\u9664"})]})]})]},e.id)}))})]})}),P>1&&Object(C.jsx)(Ot.a,{className:e.Pagination,count:P,color:"primary",onChange:function(e,t){return N(t)}}),g&&Object(C.jsx)(pt,{}),!g&&0===(null===l||void 0===l?void 0:l.length)&&Object(C.jsx)(ft,{msg:"\u6682\u672a\u6dfb\u52a0\u57f9\u517b\u8ba1\u5212"})]}),Object(C.jsx)(yn,{open:m,onClose:function(){O(!1),b({}),i((function(e){return!e}))},planDetail:j})]})},Sn=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),In=function(){var e=Sn(),t=Object(a.useContext)(re).userInfo;10===t.roleId||t.roleId;return Object(C.jsx)(Xe,{className:e.root,title:"\u57f9\u517b\u8ba1\u5212",children:Object(C.jsx)(Ke.a,{maxWidth:!1,children:Object(C.jsx)(kn,{})})})},wn=n(17),Nn=n(429),Wn=n(163),Bn=n.n(Wn),zn=n(164),Pn=n.n(zn),En=Object(u.a)((function(e){return{appBar:{position:"relative","& .MuiButton-root":{color:"#fff"}},title:{marginLeft:e.spacing(2),flex:1},box:{display:"flex",alignItems:"center",justifyContent:"center",padding:e.spacing(2)},textField:{margin:e.spacing(1),width:"150px"},contaner:{width:"800px",margin:"0 auto","& .MuiBox-root":{display:"flex",alignItems:"center",paddingLeft:"16px",cursor:"pointer"}},list:{display:"flex",flexWrap:"wrap","& .MuiListItem-root":{width:"150px",cursor:"pointer"}}}})),Tn=[{value:10,label:"\u5b66\u672f\u578b"},{value:20,label:"\u7ed3\u5408\u578b"},{value:30,label:"\u6280\u672f\u578b"}],Dn=c.a.forwardRef((function(e,t){return Object(C.jsx)(Nn.a,Object(o.a)({direction:"up",ref:t},e))}));function Fn(e){var t=e.onClose,n=e.open,c=e.users,i=e.assignStudy,r=En(),o=Object(a.useState)(""),l=Object(z.a)(o,2),s=l[0],d=l[1],u=Object(a.useState)(2),j=Object(z.a)(u,2),b=j[0],h=j[1],x=Object(a.useState)(0),m=Object(z.a)(x,2),O=m[0],p=m[1],f=Object(a.useState)(c),k=Object(z.a)(f,2),S=k[0],I=k[1],w=Object(a.useState)([]),N=Object(z.a)(w,2),W=N[0],B=N[1],P=function(){t(),B([])};Object(a.useEffect)((function(){var e=Object(wn.a)(c);""!==s&&(e=e.filter((function(e){var t;return null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.includes(s)}))),0!==parseInt(O)&&(e=e.filter((function(e){return(null===e||void 0===e?void 0:e.studyType)===parseInt(O)}))),2!==parseInt(b)&&(e=e.filter((function(e){return(null===e||void 0===e?void 0:e.keshuo)===parseInt(b)}))),I(e)}),[s,b,O]);return Object(C.jsxs)(vt.a,{fullScreen:!0,open:n,onClose:P,TransitionComponent:Dn,children:[Object(C.jsx)(v.a,{className:r.appBar,children:Object(C.jsxs)(g.a,{children:[Object(C.jsx)(y.a,{variant:"h6",className:r.title,children:"\u4efb\u52a1\u5206\u914d"}),Object(C.jsx)(le.a,{size:"small",onClick:P,children:"\u53d6\u6d88"}),Object(C.jsx)(le.a,{size:"small",onClick:function(){return i(W)},children:"\u786e\u8ba4\u5206\u914d"})]})}),Object(C.jsxs)(E.a,{className:r.box,children:[Object(C.jsx)($e.a,{label:"\u7528\u6237\u59d3\u540d",value:s,onChange:function(e){return d(e.target.value)},variant:"outlined",className:r.textField}),Object(C.jsxs)($e.a,{select:!0,label:"\u5c31\u8bfb\u7c7b\u578b",className:r.textField,onChange:function(e){return p(e.target.value)},variant:"outlined",value:O,SelectProps:{native:!0},children:[Object(C.jsx)("option",{value:0,children:"\u5168\u90e8"}),Tn.map((function(e){return Object(C.jsx)("option",{value:e.value,children:e.label},e.value)}))]}),Object(C.jsxs)($e.a,{select:!0,label:"\u662f\u5426\u79d1\u7855",className:r.textField,onChange:function(e){return h(e.target.value)},variant:"outlined",value:b,SelectProps:{native:!0},children:[Object(C.jsx)("option",{value:2,children:"\u5168\u90e8"}),Object(C.jsx)("option",{value:0,children:"\u5426"}),Object(C.jsx)("option",{value:1,children:"\u662f"})]})]}),Object(C.jsxs)(Ke.a,{className:r.contaner,children:[S.length>0&&Object(C.jsxs)(E.a,{onClick:function(){0===W.length||W.length!==S.length?B(S.map((function(e){return e.id}))):B([])},children:[W.length===S.length?Object(C.jsx)(Bn.a,{color:"primary"}):Object(C.jsx)(Pn.a,{}),"\u5168\u9009"]}),Object(C.jsx)(D.a,{className:r.list,children:null===S||void 0===S?void 0:S.map((function(e){return Object(C.jsxs)(oe.a,{onClick:function(){return t=e.id,void(W.includes(t)?B((function(e){return e.filter((function(e){return e!=t}))})):B((function(e){return[].concat(Object(wn.a)(e),[t])})));var t},children:[W.includes(e.id)?Object(C.jsx)(Bn.a,{color:"primary"}):Object(C.jsx)(Pn.a,{}),e.name]},e.id)}))})]})]})}var Mn=n(94),Ln=n.n(Mn),Hn=Object(u.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},endDate:{paddingTop:e.spacing(3),fontWeight:"bold"},card:{padding:e.spacing(3),marginTop:e.spacing(3),display:"flex","& .MuiBotton-root":{marginLeft:e.spacing(1)}},stageContent:{marginLeft:e.spacing(3),flex:1},listItem:{display:"flex","& .MuiTypography-root":{flex:1}}}})),Rn={10:{text:"\u8fdb\u884c\u4e2d",color:"#263238"},20:{text:"\u5ef6\u671f\u672a\u5b8c\u6210",color:"#ff9d00"},30:{text:"\u8d85\u671f\u672a\u5b8c\u6210",color:"#ff0000"},40:{text:"\u5df2\u5b8c\u6210",color:"#df5141"},50:{text:"\u5ef6\u671f\u5b8c\u6210",color:"#df5141"},60:{text:"\u8d85\u671f\u5b8c\u6210",color:"#df5141"}},qn=c.a.forwardRef((function(e,t){return Object(C.jsx)(Nn.a,Object(o.a)({direction:"up",ref:t},e))}));function Un(e){var t,n,c,i=e.onClose,r=e.open,o=e.planId,l=e.userId,s=Object(a.useState)({}),d=Object(z.a)(s,2),u=d[0],j=d[1],b=Hn(),h=function(){i()},x=function(){fetch("".concat("http://39.106.33.127/mng/study/plan/allocation/user/overview","?planId=").concat(o,"&userId=").concat(l),{}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){j((null===e||void 0===e?void 0:e.data)||{})}))};Object(a.useEffect)((function(){x()}),[]);var m=function(e){Ge({url:"http://39.106.33.127/mng/study/plan/allocation/edit",values:e,successCallback:function(){Ve({text:"\u53d8\u66f4\u6210\u529f",severity:"success"}),x()}})},O=function(e){var t=e.works;return Object(C.jsx)(D.a,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(C.jsx)(p,{work:e},e.id)}))})},p=function(e){var t,n,c,i,r,o,l,s,d,u,j,h=e.work,x=(null===h||void 0===h||null===(t=h.allocation)||void 0===t||null===(n=t.planWorkExpectedEndDate)||void 0===n?void 0:n.length)>11?null===h||void 0===h||null===(c=h.allocation)||void 0===c||null===(i=c.planWorkExpectedEndDate)||void 0===i?void 0:i.slice(0,11):null===h||void 0===h||null===(r=h.allocation)||void 0===r?void 0:r.planWorkExpectedEndDate,O=Object(a.useState)(!1),p=Object(z.a)(O,2),f=p[0],v=p[1],g=Object(a.useState)(x),k=Object(z.a)(g,2),S=k[0],I=k[1];return console.log(S,null===h||void 0===h||null===(o=h.allocation)||void 0===o?void 0:o.planWorkExpectedEndDate),Object(C.jsxs)(oe.a,{className:b.listItem,children:[Object(C.jsxs)(y.a,{children:[Object(C.jsx)("span",{children:"".concat(h.index,". ").concat(h.name)}),Object(C.jsx)("span",{style:{color:null===(l=Rn[(null===h||void 0===h||null===(s=h.allocation)||void 0===s?void 0:s.status)||10])||void 0===l?void 0:l.color},children:"\uff08".concat(null===(d=Rn[(null===h||void 0===h||null===(u=h.allocation)||void 0===u?void 0:u.status)||10])||void 0===d?void 0:d.text,"\uff09")})]}),f?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)($e.a,{label:"\u622a\u6b62\u65e5\u671f",type:"date",margin:"normal",disabled:!f,name:"date",value:S,onChange:function(e){return I(e.target.value)},InputLabelProps:{shrink:!0}}),Object(C.jsx)(le.a,{color:"primary",size:"small",style:{marginLeft:20},onClick:function(){var e;m({id:null===h||void 0===h||null===(e=h.allocation)||void 0===e?void 0:e.id,delayDate:S}),v(!1)},children:"\u4fdd\u5b58"})]}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("div",{children:"\u7ed3\u675f\u65e5\u671f\uff1a".concat(S)}),Object(C.jsx)(le.a,{color:"primary",size:"small",style:{marginLeft:20},onClick:function(){return v(!0)},children:"\u4fee\u6539\u7ed3\u675f\u65e5\u671f"})]}),Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"outlined",style:{marginLeft:20},onClick:function(){var e,t;return m({id:null===h||void 0===h||null===(e=h.allocation)||void 0===e?void 0:e.id,finished:0===(null===h||void 0===h||null===(t=h.allocation)||void 0===t?void 0:t.finished)?1:0})},children:0===(null===h||void 0===h||null===(j=h.allocation)||void 0===j?void 0:j.finished)?"\u8bbe\u4e3a\u5df2\u5b8c\u6210":"\u8bbe\u4e3a\u672a\u5b8c\u6210"})]})};return Object(C.jsxs)(vt.a,{fullScreen:!0,open:r,onClose:h,TransitionComponent:qn,className:b.root,children:[Object(C.jsx)(v.a,{className:b.appBar,children:Object(C.jsxs)(g.a,{children:[Object(C.jsx)(y.a,{variant:"h4",className:b.title,children:"[".concat(null===u||void 0===u?void 0:u.name,"] \u4efb\u52a1\u8fdb\u5ea6")}),Object(C.jsx)(xe.a,{edge:"start",color:"inherit",onClick:h,"aria-label":"close",children:Object(C.jsx)(Ln.a,{})})]})}),Object(C.jsxs)(Ke.a,{children:[Object(C.jsx)(y.a,{className:b.endDate,veriant:"h6",children:"\u521d\u59cb\u65e5\u671f\uff1a".concat((null===u||void 0===u||null===(t=u.referenceDate)||void 0===t?void 0:t.length)>11?null===u||void 0===u||null===(n=u.referenceDate)||void 0===n?void 0:n.slice(0,11):null===u||void 0===u?void 0:u.referenceDate)}),Object(C.jsx)(E.a,{children:null===u||void 0===u||null===(c=u.stages)||void 0===c?void 0:c.map((function(e){var t,n,a,c,i,r;return Object(C.jsxs)(it.a,{className:b.card,children:[Object(C.jsx)("div",{children:Object(C.jsxs)("h4",{children:["\u7b2c".concat(e.term,"\u5b66\u671f ~ \u7b2c").concat(e.index,"\u9636\u6bb5"),Object(C.jsx)("br",{}),Object(C.jsx)("span",{style:{fontSize:12},children:"\u7ed3\u675f\u65e5\u671f\uff1a(".concat(null===e||void 0===e||null===(t=e.endDate)||void 0===t?void 0:t.slice(0,11),")")})]})}),Object(C.jsxs)("div",{className:b.stageContent,children:[(null===e||void 0===e||null===(n=e.commonWorks)||void 0===n?void 0:n.length)>0&&Object(C.jsxs)(E.a,{children:[Object(C.jsx)(y.a,{veriant:"h6",children:"\u516c\u5171\u4efb\u52a1\uff1a"}),Object(C.jsx)(O,{works:null===e||void 0===e?void 0:e.commonWorks})]}),(null===e||void 0===e||null===(a=e.keshuoWorks)||void 0===a?void 0:a.length)>0&&Object(C.jsxs)(E.a,{children:[Object(C.jsx)(y.a,{veriant:"h6",children:"\u79d1\u7855\u4efb\u52a1\uff1a"}),Object(C.jsx)(O,{works:null===e||void 0===e?void 0:e.keshuoWorks})]}),(null===e||void 0===e||null===(c=e.academicWorks)||void 0===c?void 0:c.length)>0&&Object(C.jsxs)(E.a,{children:[Object(C.jsx)(y.a,{veriant:"h6",children:"\u5b66\u672f\u578b\u4efb\u52a1\uff1a"}),Object(C.jsx)(O,{works:null===e||void 0===e?void 0:e.academicWorks})]}),(null===e||void 0===e||null===(i=e.synthesizingWorks)||void 0===i?void 0:i.length)>0&&Object(C.jsxs)(E.a,{children:[Object(C.jsx)(y.a,{veriant:"h6",children:"\u7ed3\u5408\u578b\u4efb\u52a1\uff1a"}),Object(C.jsx)(O,{works:null===e||void 0===e?void 0:e.synthesizingWorks})]}),(null===e||void 0===e||null===(r=e.technologyWorks)||void 0===r?void 0:r.length)>0&&Object(C.jsxs)(E.a,{children:[Object(C.jsx)(y.a,{veriant:"h6",children:"\u6280\u672f\u578b\u4efb\u52a1\uff1a"}),Object(C.jsx)(O,{works:null===e||void 0===e?void 0:e.technologyWorks})]})]})]},e.id)}))})]})]})}var Vn=Object(u.a)((function(e){return{root:{padding:e.spacing(3)},actions:{justifyContent:"flex-end"},td:{maxWidth:"200px"},header:{display:"flex",padding:"16px","& p":{lineHeight:2},"& .MuiTypography-root":{flex:1}},empty:{padding:e.spacing(6),textAlign:"center"},return:{marginLeft:e.spacing(1)},Pagination:{padding:e.spacing(2),"& .MuiPagination-ul":{justifyContent:"center"}}}})),_n={0:{text:"\u672a\u5206\u914d",color:"#ff9d00"},10:{text:"\u5df2\u5206\u914d",color:"#263238"},20:{text:"\u5df2\u8fc7\u671f",color:"#ff0000"}},An=function(){var e=Vn(),t=Object(d.h)().planId,n=Object(d.g)(),c=Object(a.useState)(!1),i=Object(z.a)(c,2),r=i[0],o=i[1],l=Object(a.useState)([]),s=Object(z.a)(l,2),u=s[0],j=s[1],b=Object(a.useState)([]),h=Object(z.a)(b,2),x=h[0],m=h[1],O=Object(a.useState)(),p=Object(z.a)(O,2),f=p[0],v=p[1],g=Object(a.useState)(!1),k=Object(z.a)(g,2),S=k[0],I=k[1],w=Object(a.useState)(!1),N=Object(z.a)(w,2),W=N[0],B=N[1],P=Object(a.useContext)(re).userInfo,D=Object(a.useState)(1),F=Object(z.a)(D,2),M=F[0],L=F[1],H=Object(a.useState)(0),R=Object(z.a)(H,2),q=R[0],U=R[1],V=Object(a.useState)(!0),_=Object(z.a)(V,2),A=_[0],G=_[1];Object(a.useEffect)((function(){Y()}),[]);var Y=function(){fetch("".concat("http://39.106.33.127/mng/user/allocation/list","?planId=").concat(t),{}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){m((null===e||void 0===e?void 0:e.data)||[])}))},J=function(){I(!1),o((function(e){return!e}))},K=function(e){Ge({url:"http://39.106.33.127/mng/study/plan/assign",values:{planId:t,userIds:e},successCallback:function(){Ve({text:"\u8bbe\u7f6e\u6210\u529f",severity:"success"}),J()}})};Object(a.useEffect)((function(){fetch("".concat("http://39.106.33.127/mng/study/plan/allocation/info/list","?id=").concat(t,"&limit=10&offset=").concat(10*(M-1)),{}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){var t;j((null===e||void 0===e?void 0:e.data)||[]),U(Math.ceil((null===e||void 0===e||null===(t=e.paging)||void 0===t?void 0:t.total)/10)||0)})).finally((function(){return G(!1)}))}),[r,M]);var $=10===P.roleId||50===P.roleId;return Object(C.jsxs)("div",{className:e.root,children:[Object(C.jsxs)(it.a,{children:[Object(C.jsxs)(E.a,{className:e.header,children:[Object(C.jsx)(y.a,{color:"textPrimary",size:"small",children:"\u57f9\u517b\u8ba1\u5212\u5206\u914d"}),Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"outlined",onClick:function(){(null===x||void 0===x?void 0:x.length)>0?I(!0):Ve({text:"\u6ca1\u6709\u53ef\u5206\u914d\u7684\u7528\u6237"})},children:"\u5206\u914d\u5b66\u5458"}),Object(C.jsx)(le.a,{className:e.return,size:"small",variant:"outlined",endIcon:Object(C.jsx)(nt.a,{}),onClick:n.goBack,children:"\u8fd4\u56de"})]}),Object(C.jsx)(T.a,{}),Object(C.jsx)(E.a,{minWidth:800,children:Object(C.jsxs)(jt.a,{children:[Object(C.jsx)(bt.a,{children:Object(C.jsxs)(ht.a,{children:[Object(C.jsx)(xt.a,{children:"\u59d3\u540d"}),Object(C.jsx)(xt.a,{children:"\u5b66\u53f7"}),Object(C.jsx)(xt.a,{children:"\u72b6\u6001"}),Object(C.jsx)(xt.a,{align:"center",children:"\u4efb\u52a1\u603b\u6570/\u5df2\u5b8c\u6210"}),Object(C.jsx)(xt.a,{align:"center",children:"\u5ef6\u671f\u672a\u5b8c\u6210/\u5df2\u5b8c\u6210"}),Object(C.jsx)(xt.a,{align:"center",children:"\u8d85\u671f\u672a\u5b8c\u6210/\u5df2\u5b8c\u6210"}),$&&Object(C.jsx)(xt.a,{align:"center",children:"\u64cd\u4f5c"})]})}),Object(C.jsx)(mt.a,{children:u.map((function(e){var t,n;return Object(C.jsxs)(ht.a,{hover:!0,children:[Object(C.jsx)(xt.a,{children:e.userName}),Object(C.jsx)(xt.a,{children:e.userStuId}),Object(C.jsx)(xt.a,{children:Object(C.jsx)("span",{style:{color:null===(t=_n[(null===e||void 0===e?void 0:e.status)||0])||void 0===t?void 0:t.color},children:null===(n=_n[(null===e||void 0===e?void 0:e.status)||0])||void 0===n?void 0:n.text})}),Object(C.jsx)(xt.a,{align:"center",children:"".concat((null===e||void 0===e?void 0:e.info.total)||0," / ").concat((null===e||void 0===e?void 0:e.info.finished)||0)}),Object(C.jsx)(xt.a,{align:"center",children:"".concat((null===e||void 0===e?void 0:e.info.delayUnfinished)||0," / ").concat((null===e||void 0===e?void 0:e.info.delayFinished)||0)}),Object(C.jsxs)(xt.a,{align:"center",children:[Object(C.jsx)("span",{style:{color:1===(null===e||void 0===e?void 0:e.info.overtimeUnfinished)?"#ff9d00":(null===e||void 0===e?void 0:e.info.overtimeUnfinished)>1?"#ff0000":""},children:(null===e||void 0===e?void 0:e.info.overtimeUnfinished)||0})," / ".concat((null===e||void 0===e?void 0:e.info.overtimeFinished)||0)]}),Object(C.jsxs)(xt.a,{align:"center",children:[10!==(null===e||void 0===e?void 0:e.status)&&Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"text",onClick:function(){return K([e.userId])},children:20===(null===e||void 0===e?void 0:e.status)?"\u91cd\u65b0\u5206\u914d":"\u5206\u914d\u4efb\u52a1"}),Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"text",onClick:function(){v(e.userId),B(!0)},children:"\u5b8c\u6210\u8fdb\u5ea6"}),Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"text",onClick:function(t){return function(e,t,n){var a=kt({title:"\u786e\u5b9a\u8981\u5c06[".concat(t,"]\u79fb\u51fa\u8be5\u57f9\u517b\u8ba1\u5212\u5417\uff1f"),handleCorfirm:function(){a.close(),Ye({url:"".concat("http://39.106.33.127/mng/study/plan/allocation/delete","?id=").concat(e,"&userId=").concat(n),successCallback:function(){o((function(e){return!e})),Y()}})}})}(e.id,e.userName,e.userId)},children:"\u5220\u9664"})]})]},e.id)}))})]})}),q>1&&Object(C.jsx)(Ot.a,{className:e.Pagination,count:q,color:"primary",onChange:function(e,t){return L(t)}}),A&&Object(C.jsx)(pt,{}),!A&&0===(null===u||void 0===u?void 0:u.length)&&Object(C.jsx)(ft,{msg:"\u6682\u672a\u5206\u914d\u5b66\u5458"})]}),(null===x||void 0===x?void 0:x.length)>0&&Object(C.jsx)(Fn,{open:S,onClose:J,users:x,planId:t,assignStudy:K}),f>0&&Object(C.jsx)(Un,{open:W,onClose:function(){return B(!1)},planId:t,userId:f,refresh:function(){return o((function(e){return!e}))}})]})},Gn=n(298),Yn=n.n(Gn),Jn=Object(u.a)((function(e){return{root:{padding:e.spacing(3)}}}));function Kn(e){var t=e.onClose,n=e.open,a=e.workDetail,c=e.workType,i=e.planStageId,r=Jn(),l=function(){t()};return Object(C.jsxs)(vt.a,{onClose:l,open:n,className:r.root,children:[Object(C.jsx)(vn.a,{onClose:l,children:(null===a||void 0===a?void 0:a.id)?"\u7f16\u8f91\u4efb\u52a1":"\u65b0\u589e\u4efb\u52a1"}),Object(C.jsx)(Le.a,{initialValues:a,onSubmit:function(e){Ge({url:(null===a||void 0===a?void 0:a.id)>0?"http://39.106.33.127/mng/study/plan/work/update":"http://39.106.33.127/mng/study/plan/work/add",values:Object(o.a)(Object(o.a)({},e),{},{workType:c,planStageId:i}),successCallback:function(){Ve({text:"\u64cd\u4f5c\u6210\u529f",severity:"success"}),l()}})},children:function(e){e.errors;var t=e.handleBlur,n=e.handleChange,a=e.handleSubmit,c=(e.isSubmitting,e.touched,e.values);return Object(C.jsxs)("form",{onSubmit:a,className:"dialogForm",children:[Object(C.jsx)($e.a,{label:"\u4efb\u52a1\u540d\u79f0",fullWidth:!0,margin:"normal",name:"name",value:c.name,variant:"outlined",onBlur:t,onChange:n}),Object(C.jsx)(E.a,{my:2,children:Object(C.jsx)(le.a,{color:"primary",size:"large",type:"submit",variant:"contained",fullWidth:!0,children:"\u63d0\u4ea4"})})]})}})]})}var $n=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.paper,padding:e.spacing(2)},header:{display:"flex",alignItems:"center",paddingBottom:e.spacing(2),"& .MuiTextField-root":{width:"150px"},"& .MuiButton-root":{width:"150px",height:"40px"}},empty:{paddingTop:e.spacing(1),textAlign:"center"}}})),Qn={100:"\u516c\u5171\u4efb\u52a1",200:"\u79d1\u7855\u4efb\u52a1",310:"\u5b66\u672f\u578b\u4efb\u52a1",320:"\u7ed3\u5408\u578b\u4efb\u52a1",330:"\u6280\u672f\u578b\u4efb\u52a1"};function Xn(e){var t=e.works,n=e.refresh,c=e.workType,i=e.planStageId,r=e.hasPermission,o=$n(),l=Object(a.useState)(!1),s=Object(z.a)(l,2),d=s[0],u=s[1],j=Object(a.useState)({}),b=Object(z.a)(j,2),h=b[0],x=b[1];return Object(C.jsxs)(it.a,{className:o.root,children:[Object(C.jsxs)("div",{className:o.header,children:[Object(C.jsx)(y.a,{color:"textPrimary",size:"small",component:"h2",children:"".concat(Qn[c],"\uff1a")}),r&&Object(C.jsx)(xe.a,{color:"inherit",onClick:function(){return u(!0)},children:Object(C.jsx)(Yn.a,{})})]}),Object(C.jsx)(T.a,{}),(null===t||void 0===t?void 0:t.length)>0?Object(C.jsxs)(jt.a,{children:[Object(C.jsx)(bt.a,{children:Object(C.jsxs)(ht.a,{children:[Object(C.jsx)(xt.a,{children:"\u4efb\u52a1\u7f16\u53f7"}),Object(C.jsx)(xt.a,{children:"\u4efb\u52a1\u540d\u79f0"}),!r&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(xt.a,{children:"\u4efb\u52a1\u5468\u671f"}),Object(C.jsx)(xt.a,{children:"\u4efb\u52a1\u72b6\u6001"})]}),Object(C.jsx)(xt.a,{align:"center",children:"\u64cd\u4f5c"})]})}),Object(C.jsx)(mt.a,{children:null===t||void 0===t?void 0:t.map((function(e){var t,a,c,i;return Object(C.jsxs)(ht.a,{hover:!0,children:[Object(C.jsx)(xt.a,{children:e.id}),Object(C.jsx)(xt.a,{children:e.name}),!r&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(xt.a,{children:"".concat((null===e||void 0===e||null===(t=e.allocation)||void 0===t?void 0:t.planWorkStartDate)||"--"," ~ ").concat((null===e||void 0===e||null===(a=e.allocation)||void 0===a?void 0:a.planWorkEndDate)||"--")}),Object(C.jsx)(xt.a,{children:0===(null===e||void 0===e||null===(c=e.allocation)||void 0===c?void 0:c.finished)?"\u672a\u5b8c\u6210":"\u5df2\u5b8c\u6210"})]}),Object(C.jsx)(xt.a,{align:"center",children:r?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"text",onClick:function(){u(!0),x(e)},children:"\u7f16\u8f91"}),Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"text",onClick:function(){return function(e,t){var a=kt({title:"\u786e\u5b9a\u8981\u5220\u9664[".concat(t,"]\u5417\uff1f"),handleCorfirm:function(){a.close(),Ye({url:"".concat("http://39.106.33.127/mng/study/plan/work/delete","?id=").concat(e),successCallback:n})}})}(e.id,e.name)},children:"\u5220\u9664"})]}):Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"text",onClick:function(){var t,a,c,i;return c=null===e||void 0===e||null===(t=e.allocation)||void 0===t?void 0:t.id,i=0===(null===e||void 0===e||null===(a=e.allocation)||void 0===a?void 0:a.finished)?1:0,void Ge({url:"http://39.106.33.127/u/study/plan/allocation/edit",values:{id:c,finished:i},successCallback:function(){Ve({text:"\u53d8\u66f4\u6210\u529f",severity:"success"}),n()}})},hasPermission:r,children:0===(null===e||void 0===e||null===(i=e.allocation)||void 0===i?void 0:i.finished)?"\u8bbe\u4e3a\u5df2\u5b8c\u6210":"\u8bbe\u4e3a\u672a\u5b8c\u6210"})})]},e.id)}))})]}):Object(C.jsx)("p",{className:o.empty,children:"\u6682\u672a\u6dfb\u52a0\u4efb\u52a1"}),Object(C.jsx)(Kn,{open:d,onClose:function(){u(!1),x({}),n()},workDetail:h,planStageId:i,workType:c})]})}var Zn=Object(u.a)((function(e){return{root:{padding:e.spacing(3)}}}));function ea(e){var t=e.onClose,n=e.open,a=e.stageDetail,c=e.planId,i=Zn(),r=function(){t()},l=Object(o.a)(Object(o.a)({},a),{},{endDate:(null===a||void 0===a?void 0:a.id)>0?a.endDate.slice(0,10):""});return Object(C.jsxs)(vt.a,{onClose:r,open:n,className:i.root,children:[Object(C.jsx)(vn.a,{onClose:r,children:(null===a||void 0===a?void 0:a.id)?"\u7f16\u8f91\u57f9\u517b\u9636\u6bb5":"\u65b0\u589e\u57f9\u517b\u9636\u6bb5"}),Object(C.jsx)(Le.a,{initialValues:l,validationSchema:Je.b().shape({term:Je.c().required(),endDate:Je.c().required()}),onSubmit:function(e){Ge({url:(null===a||void 0===a?void 0:a.id)>0?"http://39.106.33.127/mng/study/plan/stage/update":"http://39.106.33.127/mng/study/plan/stage/add",values:Object(o.a)(Object(o.a)({},e),{},{planId:c}),successCallback:function(){Ve({text:"\u64cd\u4f5c\u6210\u529f",severity:"success"}),r()}})},children:function(e){var t=e.handleBlur,n=e.handleChange,c=e.handleSubmit,i=(e.isSubmitting,e.values);return Object(C.jsxs)("form",{onSubmit:c,className:"dialogForm",noValidate:!0,children:[Object(C.jsx)($e.a,{label:"\u5b66\u671f",fullWidth:!0,disabled:(null===a||void 0===a?void 0:a.id)>0,margin:"normal",name:"term",value:i.term,variant:"outlined",onBlur:t,onChange:n}),Object(C.jsx)($e.a,{label:"\u7ed3\u675f\u65f6\u95f4",type:"date",margin:"normal",fullWidth:!0,name:"endDate",value:i.endDate,onChange:n,InputLabelProps:{shrink:!0}}),Object(C.jsx)(E.a,{my:2,children:Object(C.jsx)(le.a,{color:"primary",size:"large",type:"submit",variant:"contained",children:"\u63d0\u4ea4"})})]})}})]})}var ta=n(492),na=n(299),aa=n.n(na),ca=Object(u.a)((function(e){return{popover:{pointerEvents:"none"},paper:{padding:e.spacing(1)}}})),ia=function(e){var t=ca(),n=e.text,a=e.color,c=e.handleClick,i=e.handleEdit,r=e.handleDelete;return e.hasPermission?Object(C.jsx)(ta.a,{className:t.Tooltip,title:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(le.a,{size:"small",variant:"text",style:{color:"#fff"},onClick:i,children:"\u7f16\u8f91"}),Object(C.jsx)(le.a,{size:"small",variant:"text",onClick:r,style:{color:"#fff"},children:"\u5220\u9664"})]}),interactive:!0,arrow:!0,children:Object(C.jsx)(le.a,{variant:"contained",color:a,onClick:c,endIcon:Object(C.jsx)(aa.a,{}),children:n})}):Object(C.jsx)(le.a,{variant:"contained",color:a,onClick:c,children:n})},ra=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",padding:e.spacing(3),"& .MuiCard-root":{margin:e.spacing(1)}},header:{backgroundColor:"#fff",padding:e.spacing(3),display:"flex",alignItems:"center","& h2":{flex:1}},stages:{display:"flex",flexWrap:"wrap",paddingTop:e.spacing(1),paddingBottom:e.spacing(1),"& .MuiButton-root":{margin:e.spacing(1)}},endDate:{padding:e.spacing(2),fontWeight:"bold"},return:{marginLeft:e.spacing(1)},empty:{padding:e.spacing(3),textAlign:"center"}}})),oa=function(){var e,t,n,c,i,r,o,l,s=ra(),u=Object(d.h)().id,j=Object(d.g)(),b=Object(a.useState)(!1),h=Object(z.a)(b,2),x=h[0],m=h[1],O=Object(a.useState)({}),p=Object(z.a)(O,2),f=p[0],v=p[1],g=Object(a.useState)(0),k=Object(z.a)(g,2),S=k[0],I=k[1],w=Object(a.useState)(!1),N=Object(z.a)(w,2),W=N[0],B=N[1],P=Object(a.useState)({}),D=Object(z.a)(P,2),F=D[0],M=D[1],L=Object(a.useContext)(re).userInfo,H=10===L.roleId||50===L.roleId;Object(a.useEffect)((function(){fetch("".concat(H?"http://39.106.33.127/mng/study/plan/overview":"http://39.106.33.127/u/study/plan/allocation/overview","?").concat(H?"id":"planId","=").concat(u),{}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){v((null===e||void 0===e?void 0:e.data)||{})}))}),[x]);var R=(null===f||void 0===f?void 0:f.stages)?null===f||void 0===f?void 0:f.stages[S]:[];return Object(C.jsxs)("div",{className:s.root,children:[Object(C.jsxs)(E.a,{className:s.header,children:[Object(C.jsx)(y.a,{color:"textPrimary",size:"small",component:"h2",children:(null===f||void 0===f?void 0:f.name)||""}),H&&Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"outlined",onClick:function(){return B(!0)},children:"\u6dfb\u52a0\u9636\u6bb5"}),Object(C.jsx)(le.a,{className:s.return,size:"small",variant:"outlined",endIcon:Object(C.jsx)(nt.a,{}),onClick:j.goBack,children:"\u8fd4\u56de"})]}),(null===f||void 0===f||null===(e=f.stages)||void 0===e?void 0:e.length)>0?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(E.a,{className:s.stages,children:null===f||void 0===f||null===(t=f.stages)||void 0===t?void 0:t.map((function(e,t){return Object(C.jsx)(ia,{text:"\u7b2c".concat(e.term,"\u5b66\u671f ~ \u9636\u6bb5").concat(e.index),color:S===t?"primary":"default",stage:e,handleClick:function(){return I(t)},handleDelete:function(){return function(e,t){var n=kt({title:"\u786e\u5b9a\u8981\u5220\u9664\u6539\u9636\u6bb5\u5417\uff1f",handleCorfirm:function(){n.close(),Ye({url:"".concat("http://39.106.33.127/mng/study/plan/stage/delete","?id=").concat(e),successCallback:function(){Ve({text:"\u5220\u9664\u6210\u529f",severity:"success"}),m(!x)}})}})}(e.id)},handleEdit:function(){M(e),B(!0)},hasPermission:H},e.id)}))}),Object(C.jsx)(T.a,{}),Object(C.jsx)(y.a,{color:"textPrimary",size:"small",component:"h2",className:s.endDate,children:"\u622a\u6b62\u65e5\u671f\uff1a".concat((null===R||void 0===R||null===(n=R.endDate)||void 0===n?void 0:n.slice(0,11))||"--")}),(H||(null===R||void 0===R||null===(c=R.commonWorks)||void 0===c?void 0:c.length)>0)&&Object(C.jsx)(Xn,{works:null===R||void 0===R?void 0:R.commonWorks,workType:100,planStageId:null===R||void 0===R?void 0:R.id,refresh:function(){return m(!x)},hasPermission:H}),(H||(null===R||void 0===R||null===(i=R.keshuoWorks)||void 0===i?void 0:i.length)>0)&&Object(C.jsx)(Xn,{works:null===R||void 0===R?void 0:R.keshuoWorks,workType:200,planStageId:null===R||void 0===R?void 0:R.id,refresh:function(){return m(!x)},hasPermission:H}),(H||(null===R||void 0===R||null===(r=R.academicWorks)||void 0===r?void 0:r.length)>0)&&Object(C.jsx)(Xn,{works:null===R||void 0===R?void 0:R.academicWorks,workType:310,planStageId:null===R||void 0===R?void 0:R.id,refresh:function(){return m(!x)},hasPermission:H}),(H||(null===R||void 0===R||null===(o=R.synthesizingWorks)||void 0===o?void 0:o.length)>0)&&Object(C.jsx)(Xn,{works:null===R||void 0===R?void 0:R.synthesizingWorks,workType:320,planStageId:null===R||void 0===R?void 0:R.id,refresh:function(){return m(!x)},hasPermission:H}),(H||(null===R||void 0===R||null===(l=R.technologyWorks)||void 0===l?void 0:l.length)>0)&&Object(C.jsx)(Xn,{works:null===R||void 0===R?void 0:R.technologyWorks,workType:330,planStageId:null===R||void 0===R?void 0:R.id,refresh:function(){return m(!x)},hasPermission:H})]}):Object(C.jsx)(it.a,{className:s.empty,children:"\u8fd8\u672a\u6dfb\u52a0\u4efb\u4f55\u57f9\u517b\u9636\u6bb5"}),Object(C.jsx)(ea,{open:W,onClose:function(){B(!1),M({}),m(!x)},stageDetail:F,planId:f.id})]})},la=function(e){var t=e.onClose,n=e.open,a=function(){t()};return Object(C.jsx)(vt.a,{onClose:a,open:n,children:Object(C.jsx)(Le.a,{initialValues:{title:"",content:""},validationSchema:Je.b().shape({title:Je.c().max(255).required("\u901a\u77e5\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a"),content:Je.c().required("\u901a\u77e5\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a")}),onSubmit:function(e){Ge({url:ie,values:e,successCallback:function(){a(),Ve({text:"\u901a\u77e5\u53d1\u9001\u6210\u529f",severity:"success"})}})},children:function(e){var t=e.errors,n=e.handleBlur,a=e.handleChange,c=e.handleSubmit;e.touched,e.values;return Object(C.jsxs)("form",{onSubmit:c,className:"dialogForm",children:[Object(C.jsx)($e.a,{error:Boolean(t.title),fullWidth:!0,helperText:t.title,label:"\u7f16\u8f91\u901a\u77e5\u6807\u9898",margin:"normal",name:"title",onBlur:n,onChange:a,variant:"outlined"}),Object(C.jsx)($e.a,{error:Boolean(t.content),fullWidth:!0,helperText:t.content,label:"\u7f16\u8f91\u901a\u77e5\u5185\u5bb9",margin:"normal",name:"content",multiline:!0,rows:10,onBlur:n,onChange:a,variant:"outlined"}),Object(C.jsx)(E.a,{my:2,children:Object(C.jsx)(le.a,{color:"primary",fullWidth:!0,type:"submit",variant:"contained",children:"\u53d1\u5e03\u65b0\u901a\u77e5"})})]})}})})},sa=Object(u.a)((function(e){return{root:{},actions:{justifyContent:"flex-end"},td:{maxWidth:"200px"},header:{display:"flex",justifyContent:"space-between",padding:"16px","& p":{lineHeight:2}},Pagination:{padding:e.spacing(2),"& .MuiPagination-ul":{justifyContent:"center"}}}})),da=function(){var e=sa(),t=Object(a.useState)(!1),n=Object(z.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)([]),o=Object(z.a)(r,2),l=o[0],s=o[1],d=Object(a.useState)(!1),u=Object(z.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)(!0),x=Object(z.a)(h,2),m=x[0],O=x[1],p=Object(a.useState)(1),f=Object(z.a)(p,2),v=f[0],g=f[1],k=Object(a.useState)(0),S=Object(z.a)(k,2),I=S[0],w=S[1];return Object(a.useEffect)((function(){fetch("".concat("http://39.106.33.127/mng/bulletin/paging","?limit=10&offset=").concat(10*(v-1)),{}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){var t;s((null===e||void 0===e?void 0:e.data)||[]),w(Math.ceil((null===e||void 0===e||null===(t=e.paging)||void 0===t?void 0:t.total)/10)||0)})).finally((function(){return O(!1)}))}),[c,v]),Object(C.jsxs)("div",{children:[Object(C.jsxs)(it.a,{className:e.root,children:[Object(C.jsxs)(E.a,{className:e.header,children:[Object(C.jsx)(y.a,{color:"textPrimary",size:"small",component:"h2",children:"\u901a\u77e5\u8bb0\u5f55"}),Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"outlined",onClick:function(){b(!0)},children:"\u6dfb\u52a0\u65b0\u901a\u77e5"})]}),Object(C.jsx)(T.a,{}),Object(C.jsx)(E.a,{minWidth:800,children:Object(C.jsxs)(jt.a,{children:[Object(C.jsx)(bt.a,{children:Object(C.jsxs)(ht.a,{children:[Object(C.jsx)(xt.a,{children:"\u53d1\u9001\u65f6\u95f4"}),Object(C.jsx)(xt.a,{children:"\u6807\u9898"}),Object(C.jsx)(xt.a,{children:"\u5185\u5bb9"}),Object(C.jsx)(xt.a,{align:"center",children:"\u64cd\u4f5c"})]})}),Object(C.jsx)(mt.a,{children:l.map((function(e){return Object(C.jsxs)(ht.a,{hover:!0,children:[Object(C.jsx)(xt.a,{children:e.createTime}),Object(C.jsx)(xt.a,{children:e.title}),Object(C.jsx)(xt.a,{children:e.content}),Object(C.jsx)(xt.a,{align:"center",children:Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"text",onClick:function(t){return function(e,t){var n=kt({title:"\u786e\u5b9a\u8981\u5220\u9664\u5417".concat(t,"\uff1f"),handleCorfirm:function(){n.close(),Ye({url:"".concat("http://39.106.33.127/mng/bulletin/delete","?id=").concat(e),values:{id:e},successCallback:function(){i((function(e){return!e}))}})}})}(e.id,e.title)},children:"\u5220\u9664"})})]},e.id)}))})]})}),I>1&&Object(C.jsx)(Ot.a,{className:e.Pagination,count:I,color:"primary",onChange:function(e,t){return g(t)}}),m&&Object(C.jsx)(pt,{}),!m&&0===(null===l||void 0===l?void 0:l.length)&&Object(C.jsx)(ft,{msg:"\u6682\u672a\u6dfb\u52a0\u6f14\u8bb2"})]}),Object(C.jsx)(la,{open:j,onClose:function(){b(!1),i((function(e){return!e}))}})]})},ua=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),ja=function(){var e=ua();return Object(C.jsx)(Xe,{className:e.root,title:"\u901a\u77e5\u7ba1\u7406",children:Object(C.jsx)(Ke.a,{maxWidth:!1,children:Object(C.jsx)(da,{})})})},ba=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,height:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},image:{marginTop:50,display:"inline-block",maxWidth:"100%",width:560}}})),ha=function(){var e=ba(),t=Object(a.useContext)(re).userInfo;return 10!==t.roleId&&60!==t.roleId?Object(C.jsx)(d.a,{to:"/404"}):Object(C.jsx)("div",{children:Object(C.jsx)(Xe,{className:e.root,title:"\u901a\u544a\u7ba1\u7406",children:Object(C.jsx)(E.a,{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",children:Object(C.jsx)(Ke.a,{maxWidth:"md",children:Object(C.jsx)(Le.a,{initialValues:{title:"",content:""},validationSchema:Je.b().shape({title:Je.c().max(255).required("\u901a\u77e5\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a"),content:Je.c().required("\u901a\u77e5\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a")}),onSubmit:function(e){Ge({url:ie,values:e,successCallback:function(){Ve({text:"\u901a\u77e5\u53d1\u9001\u6210\u529f",severity:"success"})}})},children:function(e){var t=e.errors,n=e.handleBlur,a=e.handleChange,c=e.handleSubmit;e.touched,e.values;return Object(C.jsxs)("form",{onSubmit:c,children:[Object(C.jsx)($e.a,{error:Boolean(t.title),fullWidth:!0,helperText:t.title,label:"\u7f16\u8f91\u901a\u77e5\u6807\u9898",margin:"normal",name:"title",onBlur:n,onChange:a,variant:"outlined"}),Object(C.jsx)($e.a,{error:Boolean(t.content),fullWidth:!0,helperText:t.content,label:"\u7f16\u8f91\u901a\u77e5\u5185\u5bb9",margin:"normal",name:"content",multiline:!0,rows:10,onBlur:n,onChange:a,variant:"outlined"}),Object(C.jsx)(E.a,{my:2,children:Object(C.jsx)(le.a,{color:"primary",fullWidth:!0,type:"submit",variant:"contained",children:"\u53d1\u5e03\u65b0\u901a\u77e5"})})]})}})})})})})},xa=Object(u.a)({root:{margin:8},title:{fontSize:14,fontWeight:600},date:{fontSize:11},unRead:{color:"#0a0d0e"},readButton:{padding:"0px 4px"}});function ma(e){var t=xa(),n=null===e||void 0===e?void 0:e.bulletin,a=n.createTime,c=n.id,i=n.read,r=n.content,o=n.title,l=e.refresh,s=function(e){!function(e){var t=e.url,n=e.successCallback;fetch(t,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){Ve({text:(null===e||void 0===e?void 0:e.success)?"\u64cd\u4f5c\u6210\u529f":(null===e||void 0===e?void 0:e.msg)||"\u64cd\u4f5c\u5931\u8d25",severity:(null===e||void 0===e?void 0:e.success)?"success":"error"}),n&&n()}))}({url:"".concat("http://39.106.33.127/u/bulletin/read","?id=").concat(e),values:{id:e},successCallback:l})};return Object(C.jsx)(it.a,{className:t.root,children:Object(C.jsx)(Yt.a,{children:Object(C.jsxs)(Jt.a,{container:!0,spacing:1,children:[Object(C.jsx)(Jt.a,{item:!0,md:11,children:Object(C.jsx)(y.a,{className:i?t.title:t.title+"  "+t.unRead,color:"textSecondary",gutterBottom:!0,children:o})}),Object(C.jsx)(Jt.a,{item:!0,md:1,children:Object(C.jsx)(y.a,{className:t.date,color:"textSecondary",gutterBottom:!0,children:a})}),Object(C.jsx)(Jt.a,{item:!0,md:11,children:Object(C.jsx)(y.a,{className:i?t.content:t.title+"  "+t.unRead,color:"textSecondary",gutterBottom:!0,children:r})}),Object(C.jsx)(Jt.a,{item:!0,md:1,children:0==i&&Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"outlined",className:t.readButton,onClick:function(){return s(c)},children:"\u6807\u8bb0\u5df2\u8bfb"})})]})})},c)}var Oa=Object(u.a)((function(e){return{header:{display:"flex",justifyContent:"space-between",padding:"16px","& p":{lineHeight:2}}}})),pa=function(){var e=Oa(),t=Object(a.useState)([]),n=Object(z.a)(t,2),c=n[0],i=n[1],r=function(){return fetch("http://39.106.33.127/u/bulletin/paging",{}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){console.log(e),i(e.data||[])}))};return Object(a.useEffect)(r,[]),Object(C.jsx)(Xe,{className:e.root,title:"notification",children:Object(C.jsx)(E.a,{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",children:Object(C.jsxs)(Ke.a,{maxWidth:"md",children:[Object(C.jsxs)(E.a,{className:e.header,children:[Object(C.jsx)(y.a,{color:"textPrimary",size:"small",component:"h2",children:"\u901a\u77e5\u8bb0\u5f55"}),Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"outlined",onClick:function(){return Ge({url:"http://39.106.33.127/u/bulletin/read/all",successCallback:r})},children:"\u5168\u90e8\u5df2\u8bfb"})]}),c.map((function(e){return Object(C.jsx)(ma,{bulletin:e,refresh:r},e.id)}))]})})})};function fa(e){var t=e.onClose,n=e.open,a=e.deviceId,c=function(){t()};return Object(C.jsx)(vt.a,{onClose:c,open:n,children:Object(C.jsx)(Le.a,{initialValues:{inventoryUsage:""},validationSchema:Je.b().shape({inventoryUsage:Je.c().max(255).required()}),onSubmit:function(e){Ge({url:"http://39.106.33.127/u/device/allocation/apply",values:Object(o.a)(Object(o.a)({},e),{},{deviceId:a}),successCallback:function(){return Ve({text:"\u7533\u8bf7\u6210\u529f",severity:"success"})}}),c()},children:function(e){e.errors;var t=e.handleBlur,n=e.handleChange,a=e.handleSubmit;e.isSubmitting,e.touched,e.values;return Object(C.jsxs)("form",{onSubmit:a,className:"dialogForm",children:[Object(C.jsx)(E.a,{mb:1,children:Object(C.jsx)(y.a,{color:"textPrimary",variant:"h4",children:"\u7533\u8bf7\u8bbe\u5907"})}),Object(C.jsx)($e.a,{fullWidth:!0,label:"\u7533\u8bf7\u6570\u91cf",margin:"normal",name:"inventoryUsage",onBlur:t,onChange:n,variant:"outlined"}),Object(C.jsx)(E.a,{my:2,children:Object(C.jsx)(le.a,{color:"primary",fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"\u63d0\u4ea4"})})]})}})})}var va=Object(u.a)((function(e){return{root:{padding:e.spacing(3)}}}));function ga(e){var t=e.onClose,n=e.open,a=e.deviceDetail,c=va(),i=function(){t()};return Object(C.jsxs)(vt.a,{onClose:i,open:n,className:c.root,children:[Object(C.jsx)(vn.a,{onClose:i,children:(null===a||void 0===a?void 0:a.id)?"\u65b0\u589e\u8bbe\u5907":"\u7f16\u8f91\u8bbe\u5907"}),Object(C.jsx)(Le.a,{initialValues:a,onSubmit:function(e){Ge({url:(null===a||void 0===a?void 0:a.id)>0?"http://39.106.33.127/mng/device/update":"http://39.106.33.127/mng/device/add",values:Object(o.a)(Object(o.a)({},e),{},{type:(null===e||void 0===e?void 0:e.type)||0}),successCallback:function(){Ve({text:"\u64cd\u4f5c\u6210\u529f",severity:"success"}),i()}})},children:function(e){e.errors;var t=e.handleBlur,n=e.handleChange,a=e.handleSubmit,c=(e.isSubmitting,e.touched,e.values);return Object(C.jsxs)("form",{onSubmit:a,className:"dialogForm",children:[Object(C.jsxs)($e.a,{select:!0,fullWidth:!0,label:"\u8bbe\u5907\u7c7b\u578b",name:"type",margin:"normal",onChange:n,variant:"outlined",SelectProps:{native:!0},children:[Object(C.jsx)("option",{value:0,children:" \u53f0\u5f0f\u8bbe\u5907"}),Object(C.jsx)("option",{value:1,children:" \u79fb\u52a8\u8bbe\u5907"}),Object(C.jsx)("option",{value:2,children:" \u670d\u52a1\u5668"}),Object(C.jsx)("option",{value:3,children:" \u5176\u4ed6"})]}),Object(C.jsx)($e.a,{label:"\u8bbe\u5907\u578b\u53f7",fullWidth:!0,margin:"normal",name:"model",value:c.model,variant:"outlined",onBlur:t,onChange:n}),Object(C.jsx)($e.a,{label:"\u8bbe\u5907\u540d\u79f0",fullWidth:!0,margin:"normal",name:"name",value:c.name,variant:"outlined",onBlur:t,onChange:n}),Object(C.jsx)($e.a,{label:"\u8d1f\u8d23\u4eba\u59d3\u540d",margin:"normal",fullWidth:!0,name:"principal",value:c.principal,variant:"outlined",onBlur:t,onChange:n}),Object(C.jsx)($e.a,{label:"\u5e93\u5b58",margin:"normal",fullWidth:!0,name:"inventory",value:c.inventory,variant:"outlined",onBlur:t,onChange:n}),Object(C.jsx)($e.a,{label:"\u5e93\u5b58\u5355\u4f4d",margin:"normal",fullWidth:!0,name:"inventoryUnit",value:c.inventoryUnit,variant:"outlined",onBlur:t,onChange:n}),Object(C.jsx)(E.a,{my:2,children:Object(C.jsx)(le.a,{color:"primary",size:"large",type:"submit",variant:"contained",children:"\u63d0\u4ea4"})})]})}})]})}var ya=Object(u.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}})),Ca=c.a.forwardRef((function(e,t){return Object(C.jsx)(Nn.a,Object(o.a)({direction:"up",ref:t},e))}));function ka(e){var t=e.onClose,n=e.open,c=e.deviceDetail,i=ya(),r=Object(a.useState)([]),o=Object(z.a)(r,2),l=o[0],s=o[1],d=Object(a.useState)(!1),u=Object(z.a)(d,2),j=u[0],b=u[1];Object(a.useEffect)((function(){(null===c||void 0===c?void 0:c.id)&&fetch("".concat("http://39.106.33.127/mng/device/usage/paging","?deviceId=").concat(null===c||void 0===c?void 0:c.id),{}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){s((null===e||void 0===e?void 0:e.data)||[])}))}),[c,j]);var h=function(){t()};return Object(C.jsxs)(vt.a,{fullScreen:!0,open:n,onClose:h,TransitionComponent:Ca,children:[Object(C.jsx)(v.a,{className:i.appBar,children:Object(C.jsxs)(g.a,{children:[Object(C.jsx)(y.a,{variant:"h6",className:i.title,children:"[".concat(c.name,"] \u501f\u7528\u8bb0\u5f55")}),Object(C.jsx)(xe.a,{edge:"start",color:"inherit",onClick:h,"aria-label":"close",children:Object(C.jsx)(Ln.a,{})})]})}),Object(C.jsxs)(jt.a,{children:[Object(C.jsx)(bt.a,{children:Object(C.jsxs)(ht.a,{children:[Object(C.jsx)(xt.a,{children:"\u501f\u7528\u4eba\u5b66\u53f7"}),Object(C.jsx)(xt.a,{children:"\u501f\u7528\u4eba\u59d3\u540d"}),Object(C.jsx)(xt.a,{children:"\u501f\u51fa\u65f6\u95f4"}),Object(C.jsx)(xt.a,{children:"\u501f\u7528\u6570\u91cf"}),Object(C.jsx)(xt.a,{children:"\u501f\u7528\u72b6\u6001"}),Object(C.jsx)(xt.a,{align:"center",children:"\u64cd\u4f5c"})]})}),Object(C.jsx)(mt.a,{children:null===l||void 0===l?void 0:l.map((function(e){return Object(C.jsxs)(ht.a,{hover:!0,children:[Object(C.jsx)(xt.a,{children:e.userStuId}),Object(C.jsx)(xt.a,{children:e.userName}),Object(C.jsx)(xt.a,{children:e.createTime}),Object(C.jsx)(xt.a,{children:"".concat(e.inventoryUsage,"\uff08").concat(e.inventoryUnit,"\uff09")}),Object(C.jsx)(xt.a,{color:10===e.status?"error":"default",children:10===e.status?"\u672a\u5f52\u8fd8":"\u5df2\u5f52\u8fd8"}),Object(C.jsx)(xt.a,{align:"center",children:10===e.status&&Object(C.jsx)(le.a,{color:10===e.status?"primary":"default",size:"small",variant:"text",onClick:function(){var t;10===e.status&&(t=e.id,Ge({url:"http://39.106.33.127/mng/device/allocation/return",values:{allocationId:t},successCallback:function(){Ve({text:"\u5f52\u8fd8\u6210\u529f",severity:"success"}),b(!j)}}))},children:"\u8bbe\u4e3a\u5df2\u8fd8"})})]},e.id)}))})]})]})}var Sa=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.paper,padding:e.spacing(2)},header:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingBottom:e.spacing(2),"& .MuiTextField-root":{width:"150px"},"& .MuiButton-root":{width:"150px",height:"40px"}}}})),Ia=[{id:100,name:"\u6240\u6709\u8bbe\u5907"},{id:0,name:"\u53f0\u5f0f\u8bbe\u5907"},{id:1,name:"\u79fb\u52a8\u8bbe\u5907"},{id:2,name:"\u670d\u52a1\u5668"},{id:3,name:"\u5176\u5b83\u8bbe\u5907"}];function wa(e){var t=e.devices,n=e.refresh,c=e.refreshHistory,i=Sa(),r=Object(a.useContext)(re).userInfo,o=Object(a.useState)(!1),l=Object(z.a)(o,2),s=l[0],d=l[1],u=Object(a.useState)(!1),j=Object(z.a)(u,2),b=j[0],h=j[1],x=Object(a.useState)(!1),m=Object(z.a)(x,2),O=m[0],p=m[1],f=Object(a.useState)(0),v=Object(z.a)(f,2),g=v[0],y=v[1],k=Object(a.useState)(100),S=Object(z.a)(k,2),I=S[0],w=S[1],N=Object(a.useState)({}),W=Object(z.a)(N,2),B=W[0],P=W[1],E=100===parseInt(I)?t:(null===t||void 0===t?void 0:t.filter((function(e){return(null===e||void 0===e?void 0:e.type)===parseInt(I)})))||[],D=10===r.roleId;return Object(C.jsxs)("div",{className:i.root,children:[Object(C.jsxs)("div",{className:i.header,children:[Object(C.jsx)($e.a,{select:!0,label:"\u8bbe\u5907\u7c7b\u578b",size:"small",value:I,onChange:function(e){return w(e.target.value)},SelectProps:{native:!0},variant:"outlined",children:Ia.map((function(e){return Object(C.jsx)("option",{value:e.id,children:e.name},e.id)}))}),D&&Object(C.jsx)(le.a,{variant:"outlined",onClick:function(){return h(!0)},children:"\u6dfb\u52a0\u8bbe\u5907"})]}),Object(C.jsx)(T.a,{}),Object(C.jsxs)(jt.a,{children:[Object(C.jsx)(bt.a,{children:Object(C.jsxs)(ht.a,{children:[Object(C.jsx)(xt.a,{children:"\u8bbe\u5907\u7c7b\u578b"}),Object(C.jsx)(xt.a,{children:"\u8bbe\u5907\u578b\u53f7"}),Object(C.jsx)(xt.a,{children:"\u8bbe\u5907\u540d\u79f0"}),Object(C.jsx)(xt.a,{children:"\u8d1f\u8d23\u4eba"}),Object(C.jsx)(xt.a,{children:"\u5e93\u5b58"}),Object(C.jsx)(xt.a,{align:"center",children:"\u64cd\u4f5c"})]})}),Object(C.jsx)(mt.a,{children:null===E||void 0===E?void 0:E.map((function(e){return Object(C.jsxs)(ht.a,{hover:!0,children:[Object(C.jsx)(xt.a,{children:Ia.find((function(t){return t.id===e.type})).name}),Object(C.jsx)(xt.a,{children:e.model}),Object(C.jsx)(xt.a,{children:e.name}),Object(C.jsx)(xt.a,{children:e.principal}),Object(C.jsx)(xt.a,{children:"".concat(e.inventory,"(").concat(e.inventoryUnit,")")}),Object(C.jsx)(xt.a,{align:"center",children:10===r.roleId?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"text",onClick:function(){P(e),p(!0)},children:"\u501f\u7528\u8bb0\u5f55"}),Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"text",onClick:function(){h(!0),P(e)},children:"\u7f16\u8f91"}),Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"text",onClick:function(){return function(e,t){var a=kt({title:"\u786e\u5b9a\u8981\u5220\u9664[".concat(t,"]\u5417\uff1f"),handleCorfirm:function(){a.close(),Ye({url:"".concat("http://39.106.33.127/mng/device/delete","?id=").concat(e),successCallback:n})}})}(e.id,e.name)},children:"\u5220\u9664"})]}):Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"text",onClick:function(){d(!0),y(e.id)},children:"\u7533\u8bf7\u8bbe\u5907"})})]},e.id)}))})]}),Object(C.jsx)(fa,{open:s,deviceId:g,onClose:function(){d(!1),y(0),n(),c()},tag:0}),Object(C.jsx)(ga,{open:b,onClose:function(){h(!1),P({}),n()},deviceDetail:B}),Object(C.jsx)(ka,{open:O,onClose:function(){p(!1),P({})},deviceDetail:B})]})}var Na=function(e){return Object(C.jsx)(wa,Object(o.a)({},e))},Wa=n(498),Ba=n(493),za=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.paper,padding:e.spacing(2)}}})),Pa=[{id:100,name:"\u6240\u6709\u8bbe\u5907"},{id:0,name:"\u53f0\u5f0f\u8bbe\u5907"},{id:1,name:"\u79fb\u52a8\u8bbe\u5907"},{id:2,name:"\u670d\u52a1\u5668"},{id:3,name:"\u5176\u5b83\u8bbe\u5907"}];function Ea(e){var t=e.refresh,n=e.refreshHistory,a=e.histories,c=za();return Object(C.jsx)("div",{className:c.root,children:Object(C.jsxs)(jt.a,{children:[Object(C.jsx)(bt.a,{children:Object(C.jsxs)(ht.a,{children:[Object(C.jsx)(xt.a,{children:"\u8bbe\u5907\u7c7b\u578b"}),Object(C.jsx)(xt.a,{children:"\u8bbe\u5907\u578b\u53f7"}),Object(C.jsx)(xt.a,{children:"\u8bbe\u5907\u540d\u79f0"}),Object(C.jsx)(xt.a,{children:"\u501f\u7528\u6570\u91cf"}),Object(C.jsx)(xt.a,{align:"center",children:"\u64cd\u4f5c"})]})}),Object(C.jsx)(mt.a,{children:null===a||void 0===a?void 0:a.map((function(e){var a;return Object(C.jsxs)(ht.a,{hover:!0,children:[Object(C.jsx)(xt.a,{children:null===(a=Pa.find((function(t){return t.id===e.deviceType})))||void 0===a?void 0:a.name}),Object(C.jsx)(xt.a,{children:e.deviceModel}),Object(C.jsx)(xt.a,{children:e.deviceName}),Object(C.jsx)(xt.a,{children:"".concat(e.inventoryUsage,"\uff08").concat(e.inventoryUnit,"\uff09")}),Object(C.jsx)(xt.a,{align:"center",children:Object(C.jsx)(le.a,{color:10===e.status?"primary":"default",size:"small",variant:"text",onClick:function(){var a;10===e.status&&(a=e.id,Ge({url:"http://39.106.33.127/u/device/allocation/return",values:{allocationId:a},successCallback:function(){Ve({text:"\u5f52\u8fd8\u6210\u529f",severity:"success"}),n(),t()}}))},children:10===e.status?"\u5f52\u8fd8\u8bbe\u5907":"\u5df2\u5f52\u8fd8"})})]},e.id)}))})]})})}var Ta=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.paper},formRoot:{"& .MuiTextField-root":{margin:e.spacing(1.5),width:"25ch"}},margin:{margin:e.spacing(1.5)}}})),Da=function(e){var t=Ta(),n=Object(a.useState)(0),c=Object(z.a)(n,2),i=c[0],r=c[1],l=Object(a.useState)(!1),s=Object(z.a)(l,2),d=s[0],u=s[1],j=Object(a.useState)([]),b=Object(z.a)(j,2),h=b[0],x=b[1];Object(a.useEffect)((function(){fetch("".concat("http://39.106.33.127/u/device/allocation/paging","?limit=1999"),{}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){return x((null===e||void 0===e?void 0:e.data)||[])}))}),[d]);var m=function(){return u((function(e){return!e}))};return Object(C.jsxs)(fe.a,{className:t.root,children:[Object(C.jsx)(v.a,{position:"static",color:"secondary",children:Object(C.jsxs)(Wa.a,{value:i,onChange:function(e,t){r(t)},indicatorColor:"primary",textColor:"primary",children:[Object(C.jsx)(Ba.a,Object(o.a)({label:"\u6240\u6709\u8bbe\u5907"},Ma(0))),Object(C.jsx)(Ba.a,Object(o.a)({label:"\u6211\u7684\u501f\u7528\u8bb0\u5f55"},Ma(1)))]})}),Object(C.jsx)(Fa,{value:i,index:0,children:Object(C.jsx)(wa,Object(o.a)(Object(o.a)({},e),{},{refreshHistory:m}))}),Object(C.jsx)(Fa,{value:i,index:1,children:Object(C.jsx)(Ea,Object(o.a)(Object(o.a)({},e),{},{refreshHistory:m,histories:h}))})]})};function Fa(e){var t=e.children,n=e.value,a=e.index,c=Object(p.a)(e,["children","value","index"]);return Object(C.jsx)("div",Object(o.a)(Object(o.a)({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},c),{},{children:n===a&&Object(C.jsx)(E.a,{p:3,children:t})}))}function Ma(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var La=Object(u.a)((function(e){return{root:{padding:e.spacing(3)}}})),Ha=[{path:"/main",component:B,routes:[{path:"/main/login",component:et},{path:"/main/reset",component:ct}]},{path:"/app",component:Me,auth:!0,routes:[{path:"/app/updateUserInfo/:id",component:function(e){var t=Object(d.h)().id,n=Object(a.useContext)(re).userInfo,c=Object(d.g)(),i=Object(a.useState)({}),r=Object(z.a)(i,2),o=r[0],l=r[1],s=st();return Object(a.useEffect)((function(){fetch("".concat(10===n.roleId?"http://39.106.33.127/mng/user/detail":"http://39.106.33.127/u/user/detail","?stuId=").concat(t),{}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){console.log(e),l((null===e||void 0===e?void 0:e.data)||{})}))}),[]),Object(C.jsx)("div",{children:Object(C.jsxs)(it.a,{children:[Object(C.jsxs)(E.a,{className:s.header,children:[Object(C.jsx)(y.a,{color:"textPrimary",size:"small",children:"\u7528\u6237\u7f16\u8f91"}),Object(C.jsx)(le.a,{color:"primary",size:"small",variant:"outlined",onClick:c.goBack,children:"\u8fd4\u56de"})]}),Object(C.jsx)(T.a,{}),Object(C.jsx)(E.a,{minWidth:800,className:s.box,children:(null===o||void 0===o?void 0:o.id)>0&&Object(C.jsx)(lt,{userDetail:o})})]})})}},{path:"/app/article/:id",component:function(e){var t=Object(d.h)().id,n=Object(a.useState)(""),c=Object(z.a)(n,2),i=c[0],r=c[1],o=Object(a.useState)(""),l=Object(z.a)(o,2),s=l[0],u=l[1],j=bn();return Object(a.useEffect)((function(){fetch("".concat(te,"/").concat(t),{}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){var t,n;console.log(e),r((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.title)||""),u((null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.content)||"")}))}),[]),Object(C.jsxs)("div",{className:j.article,children:[Object(C.jsx)(y.a,{className:j.header,color:"textPrimary",variant:"h4",children:i}),Object(C.jsx)("div",{dangerouslySetInnerHTML:{__html:s}})]})}},{path:"/app/articleEdit/:id",component:function(e){var t=Object(d.h)().id,n=Object(d.g)(),c=Object(a.useContext)(re).userInfo,i=10===c.roleId||40===c.roleId,r=Object(a.useState)([]),o=Object(z.a)(r,2),l=o[0],s=o[1],u=Object(a.useState)(""),j=Object(z.a)(u,2),b=j[0],h=j[1],x=Object(a.useState)(""),m=Object(z.a)(x,2),O=m[0],p=m[1],v=Object(a.useState)(""),g=Object(z.a)(v,2),k=g[0],S=g[1],I=xn();return Object(a.useEffect)((function(){fetch(X,{}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){s((null===e||void 0===e?void 0:e.data)||[])})),parseInt(t)>0&&fetch("".concat(te).concat(t),{}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){var t,n,a;p(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.title),S(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.content),h(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.categoryId)}))}),[]),i?Object(C.jsxs)("div",{className:I.root,children:[Object(C.jsxs)(E.a,{className:I.header,children:[Object(C.jsx)($e.a,{label:"\u8bba\u6587\u540d\u79f0",fullWidth:!0,value:O,onChange:function(e){return p(e.target.value)}}),Object(C.jsx)($e.a,{select:!0,fullWidth:!0,label:"\u8bba\u6587\u5206\u7c7b",name:"roleId",margin:"normal",onChange:function(e){return h(e.target.value)},value:b,children:l.map((function(e){return Object(C.jsx)("option",{value:e.id,children:e.name},e.id)}))})]}),Object(C.jsx)("form",{children:Object(C.jsx)(hn.a,{apiKey:"5vf6jo8wb1i8207zmbiyorw8e5z1pu5fu1o633p5lz4990yt",value:k,init:{height:500,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo|styleselect | bold italic backcolor |              alignleft aligncenter alignright alignjustify |              link|image |table|bullist numlist outdent indent | removeformat | help"},onEditorChange:function(e,t){S(e)}})}),Object(C.jsxs)(E.a,{className:I.footer,children:[Object(C.jsx)(le.a,{color:"primary",size:"large",variant:"outlined",onClick:n.goBack,children:"\u8fd4\u56de"}),Object(C.jsx)(le.a,{color:"primary",size:"large",variant:"outlined",onClick:function(){""!==O?""!==b?""!==k?Ge({url:"0"===t?ne:"http://39.106.33.127/article/edit",values:{id:t,title:O,content:k,categoryId:b},successCallback:function(){Ve({text:"\u6dfb\u52a0\u6210\u529f",severity:"success"}),n.replace("/app/essayRecommendation/essays")}}):Ve({text:"\u6587\u7ae0\u5185\u5bb9\u4e0d\u53ef\u4e3a\u7a7a",severity:"error"}):Ve({text:"\u8bf7\u9009\u62e9\u6587\u7ae0\u7c7b\u578b",severity:"error"}):Ve({text:"\u6587\u7ae0\u6807\u9898\u4e0d\u53ef\u4e3a\u7a7a",severity:"error"})},children:"\u4fdd\u5b58"})]})]}):Object(C.jsxs)("div",{className:I.article,children:[Object(C.jsxs)(E.a,{className:Object(f.a)(I.header,I.flexHeader),children:[Object(C.jsx)(y.a,{color:"textPrimary",variant:"h4",children:O}),Object(C.jsx)(le.a,{color:"primary",variant:"outlined",onClick:n.goBack,children:"\u8fd4\u56de"})]}),Object(C.jsx)("div",{dangerouslySetInnerHTML:{__html:k}})]})}},{path:"/app/seminar",component:Pt},{path:"/app/recorder",component:Rt},{path:"/app/userManagement",component:Gt},{path:"/app/essayRecommendation/essays",component:on},{path:"/app/essayRecommendation/classes",component:jn},{path:"/app/essayRecommendation",component:nn},{path:"/app/studyPlan/planAllocation/:planId",component:An},{path:"/app/studyPlan/detail/:id",component:oa},{path:"/app/studyPlan",component:In},{path:"/app/trainingScheme",component:fn},{path:"/app/bulletinManage",component:ja},{path:"/app/bulletinManagement",component:ha},{path:"/app/bulletinList",component:pa},{path:"/app/device",component:function(){var e=La(),t=Object(a.useContext)(re).userInfo,n=Object(a.useState)([]),c=Object(z.a)(n,2),i=c[0],r=c[1],o=Object(a.useState)(!1),l=Object(z.a)(o,2),s=l[0],d=l[1];Object(a.useEffect)((function(){fetch("".concat(10===t.roleId?"http://39.106.33.127/mng/device/paging":"http://39.106.33.127/u/device/paging","?limit=1999"),{}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(e){r((null===e||void 0===e?void 0:e.data)||[])}))}),[s]);var u=function(){return d((function(e){return!e}))};return Object(C.jsx)(Xe,{className:e.root,title:"\u8bbe\u5907\u7ba1\u7406",children:10===t.roleId?Object(C.jsx)(Na,{devices:i,refresh:u}):Object(C.jsx)(Da,{devices:i,refresh:u})})}},{path:"*",component:ut}]},{path:"/",component:B,routes:[{path:"/404",component:ut},{path:"/*",component:et}]}];function Ra(){return Object(C.jsx)(s.a,{children:Object(C.jsxs)(l.a,{theme:O,children:[Object(C.jsx)(h,{}),Object(C.jsx)(d.d,{children:Ha.map((function(e,t){return Object(C.jsx)(N,Object(o.a)({},e),t)}))})]})})}var qa=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,503)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};r.a.render(Object(C.jsx)(Ra,{}),document.getElementById("root")),qa()}},[[425,1,2]]]);
//# sourceMappingURL=main.de3ea65b.chunk.js.map